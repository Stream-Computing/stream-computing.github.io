"use strict";(self.webpackChunkstc_docuhub=self.webpackChunkstc_docuhub||[]).push([[1534],{586:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-24-9e543f0e35dd7c86f39f975a1c0f9472.png"},736:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-04-7590b18c167090e8aa2373620fd2c5ce.png"},753:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-27-ab2df3c05b4e7a4ebea0c40d2bae3eb8.png"},2063:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-03-2873d6ecb73f5804cc9c786f2c20fe0e.png"},2888:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-26-0a9eabc74e050be55111277b15014e92.png"},3110:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-11-721b451140554732e66eb618ed6d6376.png"},3793:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-19-12ada71be00b7177f16ee8ac32b3bb04.png"},4082:(n,e,r)=>{r.d(e,{A:()=>s});const s="data:image/png;base64,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"},4242:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-06-069224081789dca6441b48a669cb4634.png"},5093:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-09-f9403b4e02b7762dfdf8b0593068ee3d.png"},5126:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-02-7910f9f060d550270847e7671367ce78.png"},5209:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-05-9e17ce2ad1aa22d08fa05379ae0e670e.png"},5748:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-13-8eb396e314a3975323707446ffc6a79e.png"},5984:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-17-41f1f0ca444ead7d2935710bd18c8dd4.png"},6167:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-18-1374204d2c3bed5ed88d7b69c06c93d8.png"},6877:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-12-feed6f706aed0e714ecede8aebe8a9d8.png"},7739:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-14-1ab3d9bad839e326802c92325a497115.png"},7996:(n,e,r)=>{r.d(e,{A:()=>s});const s="data:image/png;base64,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"},8055:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-21-e0917bf4acc9dff5326fc74a2072fc5f.png"},8089:(n,e,r)=>{r.d(e,{A:()=>s});const s="data:image/png;base64,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"},8163:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-25-d546f7f07e73eff5b691a6607563dc86.png"},8207:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-10-8b79fcf02369991cf56d82b73d2b4432.png"},8453:(n,e,r)=>{r.d(e,{R:()=>d,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function d(n){const e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),s.createElement(t.Provider,{value:e},n.children)}},8802:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/MLTC\u4f7f\u7528\u6307\u5357","title":"MLTC\u4f7f\u7528\u6307\u5357","description":"MLTC\u6982\u8ff0","source":"@site/docs/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/MLTC\u4f7f\u7528\u6307\u5357.md","sourceDirName":"\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357","slug":"/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/MLTC\u4f7f\u7528\u6307\u5357","permalink":"/docs/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/MLTC\u4f7f\u7528\u6307\u5357","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/MLTC\u4f7f\u7528\u6307\u5357.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HPE\u4f7f\u7528\u6307\u5357","permalink":"/docs/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/HPE\u4f7f\u7528\u6307\u5357"},"next":{"title":"STC_LLM\u4f7f\u7528\u6307\u5357","permalink":"/docs/\u5e0c\u59c6\u8ba1\u7b97\u8f6f\u4ef6\u4ea7\u54c1/STCRP\u4f7f\u7528\u6307\u5357/STC_LLM\u4f7f\u7528\u6307\u5357"}}');var i=r(4848),t=r(8453);const d={},l="MLTC\u4f7f\u7528\u6307\u5357",c={},a=[{value:"MLTC\u6982\u8ff0",id:"mltc\u6982\u8ff0",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:2},{value:"\u7f16\u8bd1\u6a21\u578b",id:"\u7f16\u8bd1\u6a21\u578b",level:2},{value:"\u8f6c\u6362\u6a21\u578b",id:"\u8f6c\u6362\u6a21\u578b",level:3},{value:"\u7f16\u8bd1\u6a21\u578b",id:"\u7f16\u8bd1\u6a21\u578b-1",level:3},{value:"\u5728CPU\u4e0a\u9a8c\u8bc1\u6a21\u578b",id:"\u5728cpu\u4e0a\u9a8c\u8bc1\u6a21\u578b",level:2},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4",level:3},{value:"\u5728NPU\u4e0a\u90e8\u7f72\u6a21\u578b",id:"\u5728npu\u4e0a\u90e8\u7f72\u6a21\u578b",level:2},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4-1",level:3},{value:"\u63a8\u7406\u6548\u679c\u5bf9\u6bd4",id:"\u63a8\u7406\u6548\u679c\u5bf9\u6bd4",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:3},{value:"\u5206\u6790\u63a8\u7406\u6027\u80fd",id:"\u5206\u6790\u63a8\u7406\u6027\u80fd",level:2},{value:"\u4f7f\u7528\u9650\u5236",id:"\u4f7f\u7528\u9650\u5236",level:3},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4-2",level:3},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:3},{value:"\u5206\u6790\u7cbe\u5ea6",id:"\u5206\u6790\u7cbe\u5ea6",level:2},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4-3",level:3},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b-1",level:3},{value:"\u83b7\u53d6\u7cbe\u5ea6",id:"\u83b7\u53d6\u7cbe\u5ea6",level:4},{value:"\u5206\u6790\u7ed3\u679c",id:"\u5206\u6790\u7ed3\u679c",level:4},{value:"\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e",id:"\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e",level:4},{value:"cpu_vs_npu.csv",id:"cpu_vs_npucsv",level:5},{value:"op_name.csv",id:"op_namecsv",level:5},{value:"\u8bef\u5dee\u7c7b\u578b\u53ca\u5224\u65ad\u65b9\u6cd5",id:"\u8bef\u5dee\u7c7b\u578b\u53ca\u5224\u65ad\u65b9\u6cd5",level:4},{value:"\u5176\u4ed6\u7cbe\u5ea6\u95ee\u9898",id:"\u5176\u4ed6\u7cbe\u5ea6\u95ee\u9898",level:4},{value:"\u7cbe\u5ea6\u5206\u6790\u5b9a\u4f4d\u6280\u5de7",id:"\u7cbe\u5ea6\u5206\u6790\u5b9a\u4f4d\u6280\u5de7",level:4},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:3},{value:"\u751f\u6210\u91cf\u5316\u6a21\u578b",id:"\u751f\u6210\u91cf\u5316\u6a21\u578b",level:2},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4-4",level:3},{value:"\u4ee3\u7801\u793a\u4f8b",id:"\u4ee3\u7801\u793a\u4f8b",level:3}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"mltc\u4f7f\u7528\u6307\u5357",children:"MLTC\u4f7f\u7528\u6307\u5357"})}),"\n",(0,i.jsx)(e.h2,{id:"mltc\u6982\u8ff0",children:"MLTC\u6982\u8ff0"}),"\n",(0,i.jsxs)(e.p,{children:["MLTC\uff08Multi-Level Tensor Compiler\uff09\u662f\u57fa\u4e8e",(0,i.jsx)(e.a,{href:"https://mlir.llvm.org/",children:"MLIR"}),"\u7814\u53d1\u7684\u7aef\u5230\u7aef\u6df1\u5ea6\u5b66\u4e60\u7f16\u8bd1\u5668\uff0c\u53ef\u4ee5\u5c06\u6765\u81ea\u4e0d\u540c\u6846\u67b6\u7684AI\u6a21\u578b\u7f16\u8bd1\u4e3a\u9762\u5411\u5e0c\u59c6\u8ba1\u7b97\u786c\u4ef6\u4ea7\u54c1\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u540c\u65f6\u52a0\u901fAI\u6a21\u578b\u7684\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5065\u58ee\u6027\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"MLTC\u5177\u6709\u4ee5\u4e0b\u7279\u6027\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u591a\u5c42IR\u8bbe\u8ba1\u5b9e\u73b0\u9010\u5c42\u4e0b\u964d \uff0c\u89e3\u51b3\u4ee3\u7801\u751f\u6210\u7684\u590d\u6742\u6027\u3002\u6bcf\u6b21IR\u5c42\u7ea7\u7684\u8f6c\u6362\u53ea\u4e13\u6ce8\u4ee3\u7801\u751f\u6210\u7684\u4e00\u4e2a\u5c40\u90e8\u65b9\u9762\uff0c\u4f8b\u5982\u591a\u6838\u6267\u884c\u6a21\u578b\u3001bufferization\u3001\u7b97\u5b50\u903b\u8f91\u7684\u6307\u4ee4\u7ec4\u5408\u7b49\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u63d0\u4f9b\u4e00\u5957\u7b97\u5b50\u65e0\u5173\u7684tiling\u7cfb\u7edf\uff0c\u628a\u4e00\u4e9b\u7b97\u5b50\u7684\u516c\u5171\u903b\u8f91\u63d0\u5347\u5230\u7f16\u8bd1\u5668\u6846\u67b6\u4e2d\uff0c\u51cf\u8f7b\u7b97\u5b50\u7f16\u7a0b\u7684\u5f00\u53d1\u8d1f\u62c5\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u5065\u58ee\u6027\u3002\u9762\u5411NeuralScale\u67b6\u6784\u7f16\u5199\u7b97\u5b50\u65f6\uff0c\u4e0d\u7ba1\u662f\u624b\u5199\u7b97\u5b50\u8fd8\u662fcompute/schedule\u7684DSL\u63cf\u8ff0\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u4ee3\u7801\u903b\u8f91\u662f\u7ba1\u7406\u591a\u5c42\u5b58\u50a8\u7ed3\u6784\u548c\u5176\u95f4\u7684\u6570\u636e\u4f20\u8f93\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u6027\u80fd\u4f18\u5316\u4ee5\u72ec\u7acb\u7684\u4f18\u5316pass\u5f62\u5f0f\u4f5c\u7528\u5728\u7279\u5b9a\u5c42\u7ea7\u7684IR\u4e0a\uff0c\u53ef\u4ee5\u4efb\u610f\u6253\u5f00\u6216\u5173\u95ed\uff0c\u4e0d\u5f71\u54cd\u7cfb\u7edf\u5065\u58ee\u6027\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4fdd\u6301\u56fe\u4f18\u5316\u4e4b\u540e\u7684\u7f16\u8bd1\u5668\u4e3b\u5e72\u6d41\u7a0b\u4e0e\u7b97\u5b50\u65e0\u5173\uff0c\u4e0d\u5b58\u5728\u4efb\u4f55\u9488\u5bf9\u7279\u5b9a\u7b97\u5b50\u7684\u5b9a\u5236\u5316\u903b\u8f91\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4fdd\u6301\u56fe\u5c42IR\u7b97\u5b50\u7684\u539f\u5b50\u6027\uff0c\u4e0d\u5305\u542b\u53ef\u4ee5\u7531\u7b80\u5355\u7b97\u5b50\u7ec4\u5408\u800c\u6210\u7684\u590d\u6742\u7b97\u5b50\uff0c\u6ca1\u6709\u878d\u5408\u7b97\u5b50\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u51c6\u5907\u597d\u6a21\u578b\u63a8\u7406\u73af\u5883\uff0c\u5b89\u88c5HPE\u3001MLTC\u3001Python 3.10\u3002\u5177\u4f53\u64cd\u4f5c\uff0c\u8bf7\u53c2\u89c1",(0,i.jsx)(e.a,{href:"https://docs.streamcomputing.com/_/sharing/vSxLMI20nalGphdpXdEVoDg6JkUcfEkT?next=/zh/latest/",children:"STCRP\u5b89\u88c5\u6307\u5357"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["MLTC\u5b89\u88c5\u8def\u5f84\u53ef\u901a\u8fc7",(0,i.jsx)(e.code,{children:"mltc.__path__ "}),"\u80fd\u627e\u5230MLTC\u7684\u5b89\u88c5\u8def\u5f84\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ python3\r\nPython 3.10.11 (main, May 16 2023, 00:28:57) [GCC 11.2.0] on linux\r\nType "help", "copyright", "credits" or "license" for more information.\r\n>>> import mltc\r\n>>> mltc.__path__\r\n[\'/root/miniconda3/envs/py310/lib/python3.10/site-packages/mltc\']\r\n>>>\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u7f16\u8bd1\u6a21\u578b",children:"\u7f16\u8bd1\u6a21\u578b"}),"\n",(0,i.jsx)(e.h3,{id:"\u8f6c\u6362\u6a21\u578b",children:"\u8f6c\u6362\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"MLTC\u63d0\u4f9b\u4e86MLTC\u524d\u7aef\u5de5\u5177\u89e3\u6790AI\u6846\u67b6\u5bfc\u51fa\u7684\u6a21\u578b\u6587\u4ef6\uff0c\u8f6c\u6362\u4e3aMLTC\u81ea\u5b9a\u4e49\u7684\u56fe\u5c42IR\u3002\u76ee\u524dMLTC\u652f\u6301TensorFlow\u3001ONNX\u524d\u7aef\u6846\u67b6\uff0c\u4e0d\u540c\u6846\u67b6\u6a21\u578b\u53ef\u7528\u4e0d\u540c\u7684\u524d\u7aef\u5de5\u5177\u811a\u672c\u8fdb\u884c\u8f6c\u6362\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"mltc-tf\uff1aMLTC TensorFlow\u524d\u7aef\u8f6c\u6362\u5de5\u5177\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5DeepFM\u6a21\u578b\u4e3a\u4f8b\uff0c\u5c06\u6a21\u578b\u7684pb\u6587\u4ef6\u8f6c\u6362\u6210MLIR\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# \u547d\u4ee4\u884c\u683c\u5f0f\r\n$ mltc-tf -i <name0>:<dim0>x<dim1>x<datatype>,<name1>:<dim0>x<dim1>x<datatype> -s -t {output_tensor_name} -o {filename}.mlir {model}.pb\r\n\r\n# \u547d\u4ee4\u884c\u793a\u4f8b\r\n$ mltc-tf -i feat_index:1024x39xi32,feat_value:1024x39xf32 -s -t Sigmoid -o ./mlir_files/deepfm_stc.mlir ./models/deepfm.pb\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u53c2\u6570\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u53c2\u6570\u9009\u9879"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u662f\u5426\u5fc5\u9009"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\uff1f\uff1f\uff1f"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u6a21\u578b\u8f93\u5165\u8282\u70b9\u7684\u540d\u5b57\u548cshape\u3002\u76ee\u524d\u652f\u6301\u7684datatype\u548c\u5bf9\u5e94\u7684\u7b80\u5199\uff1aFLOAT64\uff1af64FLOAT32\uff1af32FLOAT16\uff1af16INT64\uff1ai64INT32\uff1ai32INT16\uff1ai16INT8\uff1ai8UINT64\uff1aui64UINT32\uff1aui32UINT16\uff1aui16UINT8\uff1aui8"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-s"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u8f93\u51faSTC IR\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-t string"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u6a21\u578b\u8f93\u51fa\u8282\u70b9\u7684\u540d\u5b57\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-o filename"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u5bf9\u5e94\u7684MLIR\u6587\u4ef6\u6216\u8005fatbin\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-e"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u4fdd\u5b58\u5e38\u91cf\u6570\u636e\u5230\u989d\u5916\u7684bin\u6587\u4ef6\u4e2d\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--dump"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u751f\u6210\u4e2d\u95f4\u7f16\u8bd1IR\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"mltc-onnx\uff1aMLTC ONNX\u524d\u7aef\u8f6c\u6362\u5de5\u5177\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5ResNet18\u6a21\u578b\u4e3a\u4f8b\uff0c\u5c06\u6a21\u578b\u7684ONNX\u6587\u4ef6\u8f6c\u6362\u6210MLIR\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# \u547d\u4ee4\u884c\u683c\u5f0f\r\n$ mltc-onnx -i <name0>:<dim0>x<dim1> -s -o {filepath}.mlir {model}.onnx\r\n\r\n# \u547d\u4ee4\u884c\u793a\u4f8b\r\n$ mltc-onnx -i input.1:1x3x224x224 -s -o ./mlir_files/resnet18_stc.mlir ./models/resnet18.onnx\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u53c2\u6570\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u53c2\u6570\u9009\u9879"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u662f\u5426\u5fc5\u9009"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\uff1f\uff1f\uff1f"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u6a21\u578b\u8f93\u5165\u8282\u70b9\u7684\u540d\u5b57\u548cshape\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-s"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u8f93\u51faSTC IR\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-v \uff1f\uff1f\uff1f"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u6a21\u578b\u8f93\u5165\u8282\u70b9\u7684\u503c\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-o filename"}),(0,i.jsx)(e.td,{children:"\u901a\u8fc7\u8be5\u53c2\u6570\u6307\u5b9a\u8f93\u51fa\u5bf9\u5e94\u7684MLIR\u6587\u4ef6\u6216\u8005fatbin\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-e"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u4fdd\u5b58\u5e38\u91cf\u5230\u5916\u90e8\u7684bin\u6587\u4ef6\u4e2d\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--dump"}),(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u8be5\u53c2\u6570\u540e\uff0c\u7f16\u8bd1\u65f6\u4f1a\u751f\u6210\u4e2d\u95f4\u7f16\u8bd1IR\u6587\u4ef6\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--close-const-fold"}),(0,i.jsx)(e.td,{children:"\u5173\u95ed\u5e38\u91cf\u6298\u53e0\u3002\u91cf\u5316\u6a21\u578b\u8f6c\u6362\u65f6\u9700\u8981\u4f7f\u7528\u8be5\u53c2\u6570\u5173\u95ed\u5e38\u91cf\u6298\u53e0\u3002"}),(0,i.jsx)(e.td,{})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u7f16\u8bd1\u6a21\u578b-1",children:"\u7f16\u8bd1\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u7f16\u8bd1DeepFM\u6a21\u578b\u4e3a\u4f8b\uff0c\u5c06\u8f6c\u6362\u5f97\u5230\u7684MLIR\u6587\u4ef6\u7f16\u8bd1\u4e3a\u5728\u76ee\u6807\u8bbe\u5907\u4e0a\u90e8\u7f72\u7684vmfb\u6587\u4ef6\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1aPython\u63a5\u53e3\u5b9a\u4e49\u8bf7\u53c2\u89c1",(0,i.jsx)(e.a,{href:"https://docs.streamcomputing.com/_/sharing/vSxLMI20nalGphdpXdEVoDg6JkUcfEkT?next=/zh/latest/",children:"Python API"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7f16\u5199Python\u811a\u672c\uff0c\u8c03\u7528MLTC\u7684",(0,i.jsx)(e.code,{children:"Compiler().compile"}),"\u63a5\u53e3\u7f16\u8bd1\u6a21\u578b\uff0c\u9700\u8981\u6307\u5b9a\u8f93\u5165\u8f93\u51fa\u6587\u4ef6\u8def\u5f84\uff0c\u652f\u6301\u7f16\u8bd1\u7f16\u8bd1\u53c2\u6570\u63a7\u5236\u7f16\u8bd1\u8fc7\u7a0b\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ cat compile_deepfm.py\r\nfrom mltc import Compiler\r\n\r\n# \u8f93\u5165mlir\u6587\u4ef6\u8def\u5f84\r\ninput_file = "deepfm_stc.mlir"\r\n# \u8f93\u51favmfb\u6587\u4ef6\u8def\u5f84\r\noutput_file = "deepfm.vmfb"\r\n# \u7f16\u8bd1\u53c2\u6570\r\ncompile_args = "-arch=npu-v1 --dump-ir-after-all"\r\nCompiler().compile(input_file, output_file, compile_args)\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884cPython\u811a\u672c\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 compile_deepfm.py\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5728cpu\u4e0a\u9a8c\u8bc1\u6a21\u578b",children:"\u5728CPU\u4e0a\u9a8c\u8bc1\u6a21\u578b"}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u90e8\u7f72ResNet34\u6a21\u578b\u4e3a\u4f8b\uff0c\u5c06\u901a\u8fc7MLTC\u524d\u7aef\u8f6c\u6362\u540e\u6a21\u578b\u7684MLIR\u90e8\u7f72\u5230CPU\u4e0a\u9a8c\u8bc1\u6a21\u578b\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1aPython\u63a5\u53e3\u5b9a\u4e49\u8bf7\u53c2\u89c1",(0,i.jsx)(e.a,{href:"https://docs.streamcomputing.com/_/sharing/vSxLMI20nalGphdpXdEVoDg6JkUcfEkT?next=/zh/latest/",children:"Python API"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7f16\u5199Python\u811a\u672c\uff0c\u8c03\u7528MLTC\u7684",(0,i.jsx)(e.code,{children:"Simulator().run()"}),"\u63a5\u53e3\u5728CPU\u4e0a\u90e8\u7f72\u6a21\u578b\uff0c\u9700\u8981\u6307\u5b9a\u8f93\u5165\u7684mlir\u6587\u4ef6\u8def\u5f84\u3001\u8fd0\u884c\u53c2\u6570\uff0c\u652f\u6301\u90e8\u7f72\u53c2\u6570\u63a7\u5236\u90e8\u7f72\u8fc7\u7a0b\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ cat run_resnet34_cpu.py\r\nfrom mltc import Simulator\r\nSimulator().run("resnet34_stc.mlir", "-i data.bin -o output.bin")\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u6267\u884cPython\u811a\u672c\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 run_resnet34_cpu.py\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5728npu\u4e0a\u90e8\u7f72\u6a21\u578b",children:"\u5728NPU\u4e0a\u90e8\u7f72\u6a21\u578b"}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4-1",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u90e8\u7f72DeepFM\u6a21\u578b\u4e3a\u4f8b\uff0c\u5c06\u7f16\u8bd1\u5f97\u5230\u7684vmfb\u6587\u4ef6\u90e8\u7f72\u5230NPU\u677f\u5361\u4e0a\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1aPython\u63a5\u53e3\u5b9a\u4e49\u8bf7\u53c2\u89c1",(0,i.jsx)(e.a,{href:"https://docs.streamcomputing.com/_/sharing/vSxLMI20nalGphdpXdEVoDg6JkUcfEkT?next=/zh/latest/",children:"Python API"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u7f16\u5199Python\u811a\u672c\uff0c\u8c03\u7528MLTC\u7684",(0,i.jsx)(e.code,{children:"Executor().run()"}),"\u63a5\u53e3\u90e8\u7f72\u6a21\u578b\uff0c\u9700\u8981\u6307\u5b9a\u8f93\u5165\u7684vmfb\u6587\u4ef6\u8def\u5f84\u4ee5\u53ca\u8f93\u5165\u6570\u636e\u6587\u4ef6\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ cat run_deepfm.py\r\nimport os\r\nimport numpy as np\r\nfrom mltc import Executor\r\n\r\ndef gen_fake_data(input_shapes, input_dtype, low=0, high=2):\r\n    input_data = {}\r\n    for (name, shape), dtype in zip(input_shapes.items(), input_dtype.split(",")):\r\n        if "FLOAT" in dtype.upper():\r\n            dtype = "float16"\r\n        input_data[name] = np.random.uniform(low=low, high=high, size=tuple(shape)).astype(dtype.lower())\r\n    return input_data\r\n\r\nif __name__ == "__main__":\r\n    input_shapes = {}\r\n    input_shapes["feat_index"] = [1024,39]\r\n    input_shapes["feat_value"] = [1024,39]\r\n    input_type = "int32,float32"\r\n    input_data = gen_fake_data(input_shapes, input_type)\r\n    output = Executor("./deepfm.vmfb").run(input_data)\r\n    print("=============== stc out ====================")\r\n    print(output)\n'})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u90e8\u7f72\u6a21\u578b\u65f6\uff0c\u53ef\u8bbe\u7f6e",(0,i.jsx)(e.code,{children:"STC_SET_DEVICES"}),"\u73af\u5883\u53d8\u91cf\uff0c\u6307\u5b9a\u90e8\u7f72\u6a21\u578b\u65f6\u4f7f\u7528\u7684Cluster\u3002\u4f8b\u5982\u8bbe\u7f6e ",(0,i.jsx)(e.code,{children:"export STC_SET_DEVICES=0,1"}),"\uff0c\u6a21\u578b\u5728Cluster0\u548cCluster1\u4e0a\u90e8\u7f72\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u5e76\u6267\u884cPython\u811a\u672c\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# hpe\u5b89\u88c5\u8def\u5f84\r\n$ export RISCV=/usr/local/hpe\r\n$ python3 run_deepfm.py\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u63a8\u7406\u6548\u679c\u5bf9\u6bd4",children:"\u63a8\u7406\u6548\u679c\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5YOLOv5\u6a21\u578b\u4e3a\u4f8b\uff0c\u5bf9\u6bd4NPU\u548cCPU\u7684\u63a8\u7406\u6548\u679c\uff0c\u793a\u4f8b\u6267\u884c\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u5b98\u65b9\u7684YOLOv5\u955c\u50cf\u4ee5\u53carepo\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ git clone https://github.com/ultralytics/yolov5.git\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(9101).A+"",width:"1224",height:"720"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4ece",(0,i.jsx)(e.a,{href:"https://huggingface.co/fcakyon/yolov5s-v7.0/tree/main",children:"HuggingFace"}),"\u4e0b\u8f7dpt\u683c\u5f0f\u7684\u6743\u91cd\uff08",(0,i.jsx)(e.code,{children:"yolov5s.pt"}),"\uff09\uff0c\u5e76\u5c06\u6743\u91cd\u6587\u4ef6\u79fb\u52a8\u5230YOLOv5 repo\u6240\u5728\u7684\u5e73\u7ea7\u76ee\u5f55\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(5126).A+"",width:"1280",height:"361"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528\u5b98\u65b9\u811a\u672c\uff08",(0,i.jsx)(e.code,{children:"export.py"}),"\uff09\u5c06\u6743\u91cd\u4ecept\u683c\u5f0f\u8f6c\u6362\u4e3aonnx\u683c\u5f0f\uff0c\u6ce8\u610fopset\u7248\u672c\u4e3a11\uff0c\u4fdd\u7559\u52a8\u6001\u8f74\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ # \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\r\n$ export PYTHONPATH=<downloaded_yolov5_repo_path>\r\n$ # \u5b89\u88c5\u5fc5\u987b\u7684Python\u6a21\u5757\r\n$ pip3 install torch==1.12.1 --index-url https://download.pytorch.org/whl/cpu\r\n$ pip3 install torchvision==0.13.1 --index-url https://download.pytorch.org/whl/cpu\r\n$ pip3 install onnx==1.12.0\r\n$ pip3 install onnxruntime==1.12.0\r\n$ pip3 install opencv-python\r\n$ # \u6253\u5f00\u5b98\u65b9YOLOv5 repository\u76ee\u5f55\u5e76\u8f6c\u6362\u6743\u91cd\r\n$ cd yolov5\r\n$ python3 ./export.py --weights ../yolov5s.pt --include onnx --dynamic --opset 11\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9a8c\u8bc1ONNX\u6a21\u578b\u5728CPU\u4e0a\u7684\u6267\u884c\u6548\u679c\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 ./detect.py --weights ../yolov5s.onnx\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(2063).A+"",width:"1280",height:"194"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528Netron\u67e5\u770bONNX\u6a21\u578b\u7684\u8f93\u5165shape\u3001\u8f93\u51fashape\u3001\u52a8\u6001\u8f74\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(736).A+"",width:"1280",height:"962"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u9009\u62e9\u5c06ONNX\u6a21\u578b\u7684metadata\u5bfc\u51fa\u5230YAML\u6587\u4ef6\u4e2d\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Python",children:"import onnx\r\nimport yaml\r\n\r\nonnx_model_path = '../yolov5s.onnx'\r\nyaml_output_path = '../yolov5s.metadata'\r\nmodel = onnx.load(onnx_model_path)\r\nmetadata_dict = {prop.key: eval(prop.value) for prop in model.metadata_props}\r\nwith open(yaml_output_path, 'w') as yaml_file:\r\n    yaml.dump(metadata_dict, yaml_file, default_flow_style=False)\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06ONNX\u6a21\u578b\u8f6c\u6362\u4e3aMLIR\u683c\u5f0f\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ mltc-onnx ../yolov5s.onnx -i images:1x3x640x640 -s -e -o ../yolov5s.mlir\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u7f16\u5199\u811a\u672c\u5c06MLIR\u683c\u5f0f\u6587\u4ef6\u8f6c\u6362\u4e3avmfb\u683c\u5f0f\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u8f6c\u6362\u811a\u672c\u793a\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Python",children:'from mltc import Compiler\r\n\r\ninput_file = "../yolov5s.mlir"\r\noutput_file = "../yolov5s.vmfb"\r\ncompile_args = "-arch=npu-v1"\r\nCompiler().compile(input_file, output_file, compile_args)\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u90e8\u7f72\u6a21\u578b\u5e76\u4fee\u6539\u90e8\u5206\u4ee3\u7801\u9002\u914dYOLOv5\u7684repo\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u6587\u4ef61\uff1acommon.py\uff0c\u4fee\u6539\u70b9\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(5209).A+"",width:"1023",height:"692"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4fee\u6539\u6587\u4ef62\uff1aexport.py\u3002\u4fee\u6539\u70b9\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(4242).A+"",width:"1280",height:"274"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9a8c\u8bc1\u6a21\u578b\u5728NPU\u4e0a\u7684\u6267\u884c\u6548\u679c\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 ./detect.py --weights ../yolov5s.vmfb --data ../yolov5s.metadata\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(9067).A+"",width:"1280",height:"267"})}),"\n",(0,i.jsx)(e.p,{children:"\u751f\u6210\u7684\u56fe\u7247\u793a\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(9180).A+"",width:"810",height:"1080"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"img",src:r(5093).A+"",width:"1280",height:"720"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728NPU\u548cCPU\u4e0a\u5206\u522b\u6279\u91cf\u9a8c\u8bc1\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"NPU\u4e0a\u7684\u6267\u884c\u7ed3\u679c\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"python3 ./detect.py --weights ../yolov5s.vmfb --data ../yolov5s.metadata\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(8207).A+"",width:"841",height:"300"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"CPU\u4e0a\u7684\u6267\u884c\u7ed3\u679c\uff08ORT\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"python3 ./detect.py --weights ../yolov5s.vmfb --data ../yolov5s.metadata --source ./data/images/\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(3110).A+"",width:"1280",height:"291"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,i.jsx)(e.p,{children:"\u5728NPU\u677f\u5361\u4e0a\u90e8\u7f72\u6a21\u578b\u65f6\uff0c\u5982\u679c\u51fa\u73b0\u677f\u5361\u8fd0\u884c\u5f02\u5e38\u7684\u60c5\u51b5\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(6877).A+"",width:"906",height:"227"})}),"\n",(0,i.jsx)(e.p,{children:"\u56fe\u4e2d\u63d0\u793amme\u6216vme\u6307\u4ee4\u8bbf\u5b58\u8d8a\u754c\uff0c\u5f15\u53d1\u5f02\u5e38\u7684\u6307\u4ee4\u7f16\u7801\u662f0x06ABe8FB\uff08\u56fe\u4e2d\u7ea2\u8272\u6807\u8bb0\u90e8\u5206\uff09\u3002\u4ee5\u73b0\u6709\u7684\u62a5\u9519\u4fe1\u606f\u65e0\u6cd5\u786e\u5b9a\u5177\u4f53\u662f\u54ea\u6761\u6307\u4ee4\u7684\u95ee\u9898\uff0c\u9700\u624b\u52a8\u4fee\u6539CC\u6587\u4ef6\u6765\u786e\u5b9a\u5177\u4f53\u6307\u4ee4\uff0c\u8fc7\u7a0b\u8f83\u4e3a\u7e41\u7410\uff0c\u56e0\u6b64\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6307\u4ee4\u7f16\u7801\u7ffb\u8bd1\u811a\u672c\u5de5\u5177\uff0c\u53ef\u76f4\u63a5\u67e5\u8be2\u5177\u4f53\u54ea\u6761\u6307\u4ee4\u5bfc\u81f4\u7684\u653e\u5b58\u8d8a\u754c\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6307\u4ee4\u7f16\u7801\u7ffb\u8bd1\u811a\u672c\u5de5\u5177\uff08inst_decoder.py\uff09\u653e\u5728MLTC\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684",(0,i.jsx)(e.code,{children:"python/tools"}),"\u4e0b\u3002\u4f7f\u7528\u811a\u672c\u89e3\u6790\u62a5\u9519\u7684\u6307\u4ee4\u7f16\u7801\uff0c\u5f97\u5230\u6307\u4ee4\u7f16\u7801\u5bf9\u5e94\u7684\u5177\u4f53\u6307\u4ee4\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd0\u884c",(0,i.jsx)(e.code,{children:"inst_decoder.py"}),"\u811a\u672c\uff0c\u4f7f\u7528",(0,i.jsx)(e.code,{children:"--inst"}),"\u53c2\u6570\u4f20\u5165\u5f02\u5e38\u6307\u4ee4\u7f16\u7801\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python inst_decoder.py --inst 0x06ABe8FB\r\nisnt binary code: ['000001', '1', '01010', '10111', '1', '10', '10001', '1111011']\r\ninst asm: veadd.mv.dimw (x17), (x23), (x10)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u89e3\u6790\u5b8c\u6210\u540e\u76f4\u63a5\u8f93\u51fa\u7f16\u7801\u5bf9\u5e94\u7684\u5177\u4f53\u6307\u4ee4\u3002\u5176\u4e2d",(0,i.jsx)(e.code,{children:"inst asm: veadd.mv.dimw (x17), (x23), (x10)"}),"\u6253\u5370\u7684\u662f\u5f02\u5e38\u6307\u4ee4\u7f16\u7801\u7528\u5230\u7684\u662f(x17)\uff0c(x23)\uff0c(x10)\u8fd9\u4e09\u4e2a\u6307\u4ee4\uff0c \u6839\u636e\u4e0a\u56fe\u4e2d\u7684\u663e\u793a\u4fe1\u606f\uff0c\u53ef\u5f97\u51fa\u4e0d\u540c\u6307\u4ee4\u7684\u5730\u5740\uff1ax17=0xc0400000, x10=0xf8300000, x23=0xc0097f00\uff0c\u5176\u4e2d0xf8300000\u5730\u5740\u4e0d\u5728L1\u5730\u5740\u8303\u56f4\uff0c\u53ef\u4ee5\u5f97\u51fax10\u4e2d\u7684\u5730\u5740\u4e3a\u975e\u6cd5\u5730\u5740\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u800c",(0,i.jsx)(e.code,{children:"['000001', '1', '01010', '10111', '1', '10', '10001', '1111011']"}),"\u6253\u5370\u7684\u662f\u6307\u4ee4\u4e8c\u8fdb\u5236\u7f16\u78018\u4e2a\u5b57\u6bb5\u4fe1\u606f\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(5748).A+"",width:"1141",height:"93"})}),"\n",(0,i.jsx)(e.p,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u53c2\u6570\u9009\u9879"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})})]})}),(0,i.jsx)(e.tbody,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--inst"}),(0,i.jsx)(e.td,{children:"\u5f02\u5e38\u51fa\u9519\u7684\u6307\u4ee4\u7f16\u7801\u3002\u9ed8\u8ba4\u503c\u4e3a\uff1a0x06ABE8FB\u3002"})]})})]}),"\n",(0,i.jsx)(e.h2,{id:"\u5206\u6790\u63a8\u7406\u6027\u80fd",children:"\u5206\u6790\u63a8\u7406\u6027\u80fd"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528\u6027\u80fd\u5206\u6790\u5de5\u5177\u53ef\u4ee5\u5feb\u901f\u5206\u6790\u6027\u80fd\u95ee\u9898\u3002\u6027\u80fd\u5206\u6790\u5de5\u5177\u53ef\u83b7\u53d6\u6574\u7f51\u4e2d\u878d\u5408\u7b97\u5b50\u8be6\u7ec6\u7684\u6027\u80fd\u4fe1\u606f\uff0c\u5e76\u8be6\u7ec6\u663e\u793a\u56fe\u8c03\u5ea6\u540e\u878d\u5408\u7b97\u5b50\u6bcf\u6b21\u8fd0\u884c\u7684\u6027\u80fd\u4fe1\u606f\u3002\u6027\u80fd\u5206\u6790\u5de5\u5177\u4e2d\u4e3b\u8981\u5305\u542b\u83b7\u53d6\u6027\u80fd\u6570\u636e\u811a\u672c\uff1a",(0,i.jsx)(e.code,{children:"run_perf_analysis.py"}),"\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4f7f\u7528\u9650\u5236",children:"\u4f7f\u7528\u9650\u5236"}),"\n",(0,i.jsx)(e.p,{children:"\u76ee\u524d\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u4e0d\u652f\u6301copy\u7c7b\u7b97\u5b50\u53caDMA cycle\u6027\u80fd\u6570\u636e\u7edf\u8ba1\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4-2",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u6027\u80fd\u5206\u6790\u5de5\u5177\u811a\u672c\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6027\u80fd\u5206\u6790\u5de5\u5177\u811a\u672c\uff08run_perf_analysis.py\uff09\u653e\u5728MLTC\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684",(0,i.jsx)(e.code,{children:"python/tools/dump_memory"}),"\u4e0b\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"DUMP_PERF_PATH"}),"\u8bbe\u7f6e\u6027\u80fd\u6570\u636edump\u540e\u5b58\u653e\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653e\u6a21\u578b\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u6027\u80fd\u6570\u636e\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# \u8bbe\u7f6e\u6027\u80fd\u6570\u636e\u5b58\u653e\u76ee\u5f55\r\n$ export DUMP_PERF_PATH=${perf_dir_name}\r\n# \u793a\u4f8b\r\n$ export DUMP_PERF_PATH=~/perf_dump\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u6a21\u578b\u7684\u6027\u80fd\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd0\u884c\u9700\u8981\u6027\u80fd\u5206\u6790\u7684\u7f51\u7edc\u6a21\u578b\u7528\u4f8b\uff0c\u5177\u4f53\u793a\u4f8b\u53ef\u53c2\u8003",(0,i.jsx)(e.em,{children:"\u4f7f\u7528\u793a\u4f8b\u7ae0\u8282"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fd0\u884c\u5de5\u5177\u4e2d\u7684NPU\u6570\u636e\u5206\u6790\u811a\u672c\uff0c\u83b7\u53d6\u8282\u70b9\u6bcf\u6b21\u8fd0\u884c\u7684\u8be6\u7ec6\u6027\u80fd\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6027\u80fd\u5206\u6790\u5de5\u5177\u811a\u672c\u653e\u5728MLTC\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684",(0,i.jsx)(e.code,{children:"python/tools/dump_memory"}),"\u4e0b\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 run_perf_analysis.py\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4f7f\u7528\u793a\u4f8b",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u4ee5ResNet34\u7f51\u7edc\u4e3a\u4f8b\uff0c\u4f7f\u7528\u6027\u80fd\u5206\u6790\u5de5\u5177\u83b7\u53d6\u6027\u80fd\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# \u8bbe\u7f6e\u6027\u80fd\u6570\u636e\u5b58\u653e\u76ee\u5f55\r\n$ export DUMP_PERF_PATH=~/perf_dump/resnet34_perf_dump\r\n# \u6a21\u578b\u8f6c\u6362\u6210MLIR\r\n$ mltc-tf -i data:16x224x224x3xf32 -t softmax/Softmax -s resnet34/resnet34.pb -o resnet34/resnet34.mlir\r\n# \u7f16\u8bd1\u6a21\u578b\uff0c\u793a\u4f8b\u53ef\u53c2\u8003\u7f16\u8bd1\u6a21\u578b\u7ae0\u8282\r\n$ python3 compile_resnet34.py\r\n# \u90e8\u7f72ResNet34\u6a21\u578b\uff0c\u793a\u4f8b\u53ef\u53c2\u8003\u90e8\u7f72\u6a21\u578b\u7ae0\u8282\r\n$ python3 run_resnet34.py\r\n# \u8fd0\u884c\u6027\u80fd\u5206\u6790\u811a\u672c\r\n$ cd python/tools/dump_memory\r\n$ python3 run_perf_analysis.py\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u7ec8\u5bf9\u6bd4\u7ed3\u679c\u751f\u6210\u5728\u60a8\u6307\u5b9a\u7684dump\u6570\u636e\u5b58\u653e\u76ee\u5f55\u4e0b\uff0c\u5373\u8bbe\u7f6e\u7684",(0,i.jsx)(e.code,{children:"DUMP_PERF_PATH"}),"\u4e0b\uff0c\u5176\u4e2d\u5305\u542b\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"dump_data\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662fdump\u51fa\u6765\u768416\u8fdb\u5236\u7684\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["result\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662f\u6700\u7ec8\u5bf9\u6bd4\u5206\u6790\u7ed3\u679c\u3002","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"skip_perf_dict.csv\uff1a\u6267\u884c\u8fc7\u7a0b\u4e2d\u88ab\u8df3\u8fc7\u7684\u8282\u70b9\u4ee5\u53ca\u8be6\u7ec6\u8df3\u8fc7\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"op_perf_coreid.csv\uff1a\u6bcf\u4e2a\u6838\u4e0a\u7684\u6027\u80fd\u6570\u636e\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5op_perf_0.csv\u6027\u80fd\u6570\u636e\u4e3a\u4f8b\uff0c\u7ed3\u679c\u6587\u4ef6\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(7739).A+"",width:"1280",height:"432"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u6bb5\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u5b57\u6bb5\u540d"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"name"}),(0,i.jsx)(e.td,{children:"\u8282\u70b9\u540d\u79f0\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mcu_cycle"}),(0,i.jsx)(e.td,{children:"\u603b\u7684\u6267\u884c\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"vme_cycle"}),(0,i.jsx)(e.td,{children:"vme\u6267\u884c\u5355\u5143\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mme_cycle"}),(0,i.jsx)(e.td,{children:"mme\u6267\u884c\u5355\u5143\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"vec_cycle"}),(0,i.jsx)(e.td,{children:"rvv\u6267\u884c\u5355\u5143\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"syn_cycle"}),(0,i.jsx)(e.td,{children:"sync\u6267\u884c\u5355\u5143\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_total_cycle"}),(0,i.jsx)(e.td,{children:"mte\u603b\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"vme_inst"}),(0,i.jsx)(e.td,{children:"vme\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mme_inst"}),(0,i.jsx)(e.td,{children:"mme\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"vec_inst"}),(0,i.jsx)(e.td,{children:"rvv\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"syn_inst"}),(0,i.jsx)(e.td,{children:"sync\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_pld_inst"}),(0,i.jsx)(e.td,{children:"pld\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_icmov_inst"}),(0,i.jsx)(e.td,{children:"icmov\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_mov_inst"}),(0,i.jsx)(e.td,{children:"mov\u6307\u4ee4\u6761\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"pal_vme_mme_cycle"}),(0,i.jsx)(e.td,{children:"vme\u548cmme\u6307\u4ee4\u5e76\u884c\u8fd0\u884c\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"pal_mte_mme_cycle"}),(0,i.jsx)(e.td,{children:"vme\u548cmme\u6307\u4ee4\u5e76\u884c\u8fd0\u884c\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"pal_vme_mte_cycle"}),(0,i.jsx)(e.td,{children:"vme\u548cmte\u6307\u4ee4\u5e76\u884c\u8fd0\u884c\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"pal_total_cycle"}),(0,i.jsx)(e.td,{children:"vme\u3001mme\u3001mte\u603b\u5e76\u884c\u8fd0\u884c\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_icmov_cycle"}),(0,i.jsx)(e.td,{children:"icmov\u6307\u4ee4\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_l12llb_cycle"}),(0,i.jsx)(e.td,{children:"mov_l12llb\u6307\u4ee4\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_llb2l1_cycle"}),(0,i.jsx)(e.td,{children:"mov_llb2l1\u6307\u4ee4\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_pld_cycle"}),(0,i.jsx)(e.td,{children:"pld\u6307\u4ee4\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_pld_byte"}),(0,i.jsx)(e.td,{children:"pld\u642c\u79fb\u7684\u6570\u636e\u603b\u91cf\uff0c\u5b57\u8282\u4e3a\u5355\u4f4d\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_l12llb_byte"}),(0,i.jsx)(e.td,{children:"mov_l12llb\u642c\u79fb\u7684\u6570\u636e\u603b\u91cf\uff0c\u5b57\u8282\u4e3a\u5355\u4f4d\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_llb2l1_byte"}),(0,i.jsx)(e.td,{children:"mov_llb2l1\u642c\u79fb\u7684\u6570\u636e\u603b\u91cf\uff0c\u5b57\u8282\u4e3a\u5355\u4f4d\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_icmov_byte"}),(0,i.jsx)(e.td,{children:"icmov\u642c\u79fb\u7684\u6570\u636e\u603b\u91cf\uff0c\u5b57\u8282\u4e3a\u5355\u4f4d\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"syn_wait_cycle"}),(0,i.jsx)(e.td,{children:"syn\u7b49\u5f85\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"vec_slot_wait_cycle"}),(0,i.jsx)(e.td,{children:"rvv\u6307\u4ee4\u7b49\u5f85\u6267\u884c\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mme_slot_wait_cycle"}),(0,i.jsx)(e.td,{children:"mme\u6307\u4ee4\u7b49\u5f85\u6267\u884c\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mte_slot_wait_cycle"}),(0,i.jsx)(e.td,{children:"mte\u6307\u4ee4\u7b49\u5f85\u6267\u884c\u7684\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"l1_conflict_cycle"}),(0,i.jsx)(e.td,{children:"l1\u51b2\u7a81\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"im_conflict_cycle"}),(0,i.jsx)(e.td,{children:"imb\u51b2\u7a81\u5468\u671f\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"dcache_miss_cnt"}),(0,i.jsx)(e.td,{children:"dcache\u6ca1\u547d\u4e2d\u6b21\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"icache_miss_cnt"}),(0,i.jsx)(e.td,{children:"icache\u6ca1\u547d\u4e2d\u6b21\u6570\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"instruction_cnt"}),(0,i.jsx)(e.td,{children:"\u603b\u6307\u4ee4\u6761\u6570\u3002"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u5206\u6790\u7cbe\u5ea6",children:"\u5206\u6790\u7cbe\u5ea6"}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d\u7cbe\u5ea6\u95ee\u9898\u3002\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u53ef\u63d0\u4f9b\u751f\u6210\u7684\u7f51\u7edc\u6a21\u578b\u5728CPU\u4e0eNPU\u8fd0\u884c\u7684\u6570\u636e\u5bf9\u6bd4\u7ed3\u679c\u5206\u6790\u8868\uff0c\u8fd8\u63d0\u4f9b\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\u7b97\u5b50\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5305\u62ec\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\u53d1\u751f\u4f4d\u7f6e\u7684\u7d22\u5f15\u53f7\u4ee5\u53ca\u5728CPU\u548cNPU\u4e0a\u7684\u7d22\u5f15\u4f4d\u7f6e\u7684\u503c\u3002\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u4e2d\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u811a\u672c:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"run_npu_data_analysis.py"}),"\uff1aNPU\u6570\u636e\u62fc\u63a5\u811a\u672c\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"run_precision_analysis.py"}),"\uff1aNPU\u548cCPU\u7cbe\u5ea6\u5bf9\u6bd4\u811a\u672c\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4-3",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u811a\u672c\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u7684\u6240\u6709\u811a\u672c\u653e\u5728MLTC\u5b89\u88c5\u76ee\u5f55\u4e0b\u7684",(0,i.jsx)(e.code,{children:"python/tools/dump_memory"}),"\u4e0b\u3002\u53ef\u901a\u8fc7",(0,i.jsx)(e.code,{children:"mltc.__path__ "}),"\u627e\u5230MLTC\u7684\u5b89\u88c5\u8def\u5f84\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ python3\r\nPython 3.10.11 (main, May 16 2023, 00:28:57) [GCC 11.2.0] on linux\r\nType "help", "copyright", "credits" or "license" for more information.\r\n>>> import mltc\r\n>>> mltc.__path__\r\n[\'/root/miniconda3/envs/py310/lib/python3.10/site-packages/mltc\']\r\n>>>\r\n\r\n$ ls /root/miniconda3/envs/py310/lib/python3.10/site-packages/mltc/python/tools/dump_memory\r\nci_compare.py  common.py  __init__.py  __pycache__  run_analysis.py  run_npu_data_analysis.py  run_perf_analysis.py  run_precision_analysis.py\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"DUMP_MEMORY_PATH"}),"\u8bbe\u7f6edump\u6570\u636e\u5b58\u653e\u7684\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u653edump\u6a21\u578b\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\uff0c\u57fa\u4e8edump\u6570\u636e\u5206\u6790\u51fa\u7684NPU/CPU\u6570\u636e\uff0c\u4ee5\u53ca\u7cbe\u5ea6\u5bf9\u6bd4\u7ed3\u679c\u3002"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u8be5\u8bbe\u7f6e\u5728\u8fd0\u884c\u65f6\u4f1a\u5f71\u54cdcycle\u6570\uff0c\u53ef\u901a\u8fc7",(0,i.jsx)(e.code,{children:"unset DUMP_MEMORY_PATH"}),"\u5220\u9664\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"# \u8bbe\u7f6edump\u6570\u636e\u5b58\u653e\u76ee\u5f55\r\n$ export DUMP_MEMORY_PATH=${dump_dir_name}\r\n# \u793a\u4f8b\r\n$ export DUMP_MEMORY_PATH=~/data_dump/test_1\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6ce8\u610f\uff1a\u76ee\u6807\u8def\u5f84\u53ea\u80fd\u8bbe\u7f6e\u4e3a",(0,i.jsx)(e.strong,{children:"\u7edd\u5bf9\u8def\u5f84"}),"\uff0c\u4e14\u8def\u5f84\u5b57\u7b26\u957f\u5ea6\u4e0d\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002\u5982\u679c\u76ee\u6807\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u81ea\u52a8\u65b0\u5efa\u76ee\u5f55\uff1b\u5982\u679c\u76ee\u6807\u76ee\u5f55\u5df2\u5b58\u5728\uff0c\u5219\u4f1a\u81ea\u52a8",(0,i.jsx)(e.strong,{children:"\u5220\u9664"}),"\u6574\u4e2a\u76ee\u5f55\u540e\u518d\u81ea\u52a8\u65b0\u5efa\u3002\u8bbe\u7f6e\u76ee\u5f55\u65f6\uff0c\u8bf7\u591a\u52a0\u6ce8\u610f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u6a21\u578b\u7684NPU\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u7f16\u8bd1\u5e76\u8fd0\u884c\u9700\u8981\u7cbe\u5ea6\u5206\u6790\u7684\u7f51\u7edc\u6a21\u578b\u7528\u4f8b\uff0cdump\u51faNPU\u6570\u636e\u5b58\u653e\u5728",(0,i.jsx)(e.code,{children:"$DUMP_MEMORY_PATH/dump_data"}),"\u6587\u4ef6\u5939\u4e2d\u5bf9\u5e94\u5361\u7684\u6587\u4ef6\u5939\u4e0b\uff0c\u5355\u5361\u60c5\u51b5\u4e0b\u6570\u636e\u53ea\u4f1adump\u52300\u6587\u4ef6\u5939\u4e2d\u3002\u591a\u5361\u60c5\u51b5\u4e0bdump\u51fa\u6765\u7684\u6570\u636e\u4f1a\u653e\u5728\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\u4e0b\uff0c\u4e0b\u56fe\u4ee5\u4e24\u5361\u4e3a\u4f8b\uff0c0\uff0c1\u6587\u4ef6\u5939\u4e0b\u5206\u522b\u5b58\u653e\u77400\u5361\u548c1\u5361dump\u51fa\u6765\u7684\u6570\u636e\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(4082).A+"",width:"253",height:"156"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u5177\u4f53\u6a21\u578b\u793a\u4f8b\u53ef\u53c2\u8003",(0,i.jsx)(e.em,{children:"\u4f7f\u7528\u793a\u4f8b\u7ae0\u8282"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u83b7\u53d6\u6a21\u578b\u7684CPU\u6570\u636e\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u7f16\u5199Python\u811a\u672c\uff0c\u8c03\u7528MLTC\u7684",(0,i.jsx)(e.code,{children:"Simulator().run()"}),"\u63a5\u53e3\u5728CPU\u4e0a\u90e8\u7f72\u6a21\u578b\u83b7\u53d6dump\u6570\u636e\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5176\u4e2d",(0,i.jsx)(e.code,{children:"--dump-dir"}),"\u8bbe\u7f6e\u7684\u8def\u5f84\u4e3a",(0,i.jsx)(e.code,{children:"DUMP_MEMORY_PATH"}),"\u8bbe\u7f6e\u7684\u76ee\u5f55\u4e0bcpu\u6587\u4ef6\u5939\u8def\u5f84\u5e76\u4e14\u4e3a\u7edd\u5bf9\u8def\u5f84\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'$ cat run_resnet34_cpu.py\r\nfrom mltc import Simulator\r\nSimulator().run("resnet34.mlir", "-i data.bin -o output.bin --dump-each-op-result --dump-dir=/root/data_dump/test_1/cpu")\r\n\r\n$ python3 run_resnet34_cpu.py\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fd0\u884c\u5de5\u5177\u4e2d\u7684NPU\u6570\u636e\u62fc\u63a5\u811a\u672c\uff0c\u5bf9NPU\u6570\u636e\u8fdb\u884c\u62fc\u63a5\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ python3 run_npu_data_analysis.py\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd0\u884c\u540e\u5f97\u5230\u62fc\u63a5\u540e\u7684NPU\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(8089).A+"",width:"182",height:"175"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u8fd0\u884c\u7cbe\u5ea6\u5bf9\u6bd4\u811a\u672c\uff0c\u5bf9\u6bd4NPU\u548cCPU\u6570\u636e\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'$ python3 run_precision_analysis.py --ref_dtype="float32"\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u5176\u4e2d\uff0c",(0,i.jsx)(e.code,{children:"run_precision_analysis.py"}),"\u811a\u672c\uff0c\u8fd0\u884c\u65f6\u53ef\u4f20\u5165\u4e0d\u540c\u53c2\u6570\uff0c\u83b7\u53d6\u4e0d\u540c\u7ed3\u679c\u6587\u4ef6\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,i.jsx)(e.code,{children:"-h\uff0c--help"}),"\u67e5\u770b\u5e2e\u52a9\u4fe1\u606f\u4e2d\u7684\u53ef\u9009\u53c2\u6570\uff0c\u5176\u4e2d",(0,i.jsx)(e.code,{children:"--atol"}),"\u3001",(0,i.jsx)(e.code,{children:"--rtol"}),"\u53ef\u8bbe\u7f6e\u9608\u503c\u3001",(0,i.jsx)(e.code,{children:"--show_graph"}),"\u53ef\u83b7\u53d6\u9519\u8bef\u8282\u70b9\u7684\u5206\u6790\u56fe\uff0c\u5176\u4ed6\u53c2\u6570\u503c\u4e0d\u5efa\u8bae\u4fee\u6539\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u9009\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u53c2\u6570\u9009\u9879"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u662f\u5426\u5efa\u8bae\u4fee\u6539"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-h\uff0c--help"}),(0,i.jsx)(e.td,{children:"\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u5e76\u9000\u51fa\u3002"}),(0,i.jsx)(e.td,{children:"/"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--ref_dtype"}),(0,i.jsx)(e.td,{children:"\u6a21\u578b\u8f93\u5165\u6570\u636e\u7c7b\u578b\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--cpu_dir"}),(0,i.jsx)(e.td,{children:"CPU\u6570\u636e\u7684\u5b58\u653e\u76ee\u5f55\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--npu_dir"}),(0,i.jsx)(e.td,{children:"NPU\u6570\u636e\u7684\u5b58\u653e\u76ee\u5f55\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--node_runtime_filename"}),(0,i.jsx)(e.td,{children:"\u5b58\u653e\u6bcf\u4e2a\u8282\u70b9\u7684\u8fd0\u884c\u65f6\u523b\uff0c\u4e3b\u8981\u7528\u6765\u6392\u5e8f\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"-op_config_name"}),(0,i.jsx)(e.td,{children:"\u6bcf\u4e2a\u8282\u70b9\u7684\u6bd4\u8f83\u65f6\u5019\u7528\u7684atol\u548crtol\uff0c\u9ed8\u8ba4\u662fNA\u8868\u793a\u7528\u5168\u5c40\u7684atol/rtol\u3002\u7279\u6b8a\u9700\u6c42\u65f6\u4f7f\u7528\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--diff_cnt"}),(0,i.jsx)(e.td,{children:"\u6700\u5927\u5bfc\u51fa\u7684\u51fa\u9519\u6570\u636e\u4e2a\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a128\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--atol"}),(0,i.jsx)(e.td,{children:"\u7edd\u5bf9\u8bef\u5dee\u9608\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a0.005\u3002\u811a\u672c\u4f1a\u6839\u636e\u7edd\u5bf9\u8bef\u5dee\u9608\u503c\u7684\u8bbe\u7f6e\u6765\u7edf\u8ba1\u8bef\u5dee\u8d85\u8fc7\u8be5\u9608\u503c\u7684\u7ed3\u679c\u5728\u5168\u90e8\u7ed3\u679c\u4e2d\u7684\u5360\u6bd4\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--rtol"}),(0,i.jsx)(e.td,{children:"\u76f8\u5bf9\u8bef\u5dee\u9608\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a0.2\uff0c\u8303\u56f4\u5728[0.0 ~ 1.0]\u3002\u811a\u672c\u4f1a\u6839\u636e\u76f8\u5bf9\u8bef\u5dee\u9608\u503c\u7684\u8bbe\u7f6e\u6765\u7edf\u8ba1\u8bef\u5dee\u8d85\u8fc7\u8be5\u9608\u503c\u7684\u7ed3\u679c\u5728\u5168\u90e8\u7ed3\u679c\u4e2d\u7684\u5360\u6bd4\u3002"}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--show_graph"}),(0,i.jsxs)(e.td,{children:["\u662f\u5426\u663e\u793a\u6240\u6709\u9519\u8bef\u8282\u70b9\u7684\u5206\u6790\u56fe\uff0c\u53d6\u503c\u542b\u4e49\uff1a",(0,i.jsx)("br",{}),"True\uff1a\u663e\u793a\u5206\u6790\u56fe\u3002\u5982\u679c\u6570\u636e\u91cf\u5927\uff0c\u7ed8\u56fe\u4f1a\u6bd4\u8f83\u8017\u65f6\u3002",(0,i.jsx)("br",{}),"False\uff1a\u9ed8\u8ba4\u503c\uff0c\u4e0d\u663e\u793a\u5206\u6790\u56fe\u3002",(0,i.jsx)("br",{}),"\u5206\u6790\u56fe\u5305\u62ec\u4ee5\u4e0b\u7c7b\u578b\uff1a",(0,i.jsx)("br",{}),"op_name_diff.png \uff1a\u9519\u8bef\u6570\u636e\u5bf9\u5e94\u7684\u7edd\u5bf9\u8bef\u5dee\u548c\u76f8\u5bf9\u8bef\u5dee\u6563\u70b9\u56fe\u3002",(0,i.jsx)("br",{}),"op_name_diff_hist.png \uff1a \u76f8\u5bf9\u8bef\u5dee\u548c\u7edd\u5bf9\u8bef\u5dee\u7684\u76f4\u65b9\u56fe\u5206\u5e03\u3002",(0,i.jsx)("br",{}),"op_name_hist.png\uff1aCPU\u548cNPU\u6570\u636e\u7684\u76f4\u65b9\u56fe\u5206\u5e03\u3002"]}),(0,i.jsx)(e.td,{children:"\u662f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--max_bins"}),(0,i.jsx)(e.td,{children:"\u76f4\u65b9\u56fe\u6700\u5927bin\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a128\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--min_bins"}),(0,i.jsx)(e.td,{children:"\u76f4\u65b9\u56fe\u6700\u5c0fbin\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a1\uff0c\u8303\u56f4\u4e3a[1, max_bins]\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--max_cores"}),(0,i.jsx)(e.td,{children:"\u7cbe\u5ea6\u5206\u6790\u65f6\u7528\u5230\u6700\u5927\u6838\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a16\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--map_node_dict"}),(0,i.jsx)(e.td,{children:"\u4eba\u4e3a\u7ed9\u5b9a\u7684\u53c2\u8003\u8282\u70b9\u4e0eNPU\u8282\u70b9\u6620\u5c04dict\uff0c\u5185\u5bb9\u793a\u4f8b \uff1a\uff1f\uff1f\uff1f\u3002\u6620\u5c04\u5173\u7cfb\u552f\u4e00\u6027\u548c\u6b63\u786e\u6027\u9700\u5f97\u5230\u4fdd\u8bc1\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"--force_compare"}),(0,i.jsx)(e.td,{children:"\u7cbe\u5ea6\u5206\u6790\u65f6\uff0c\u662f\u5426\u5bf9shape\u4e0d\u4e00\u81f4\u4f46size\u4e00\u81f4\u7684\u8282\u70b9\u8fdb\u884c\u5206\u6790\uff0c\u9ed8\u8ba4\u503c\u4e3aFalse\u3002"}),(0,i.jsx)(e.td,{children:"\u5426"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4f7f\u7528\u793a\u4f8b-1",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,i.jsx)(e.h4,{id:"\u83b7\u53d6\u7cbe\u5ea6",children:"\u83b7\u53d6\u7cbe\u5ea6"}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u4ee5ResNet34\u7f51\u7edc\u4e3a\u4f8b\uff0c\u4f7f\u7528\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u83b7\u53d6\u7cbe\u5ea6\u6570\u636e\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'# \u8bbe\u7f6edump\u6570\u636e\u5b58\u653e\u76ee\u5f55\r\n$ export DUMP_MEMORY_PATH=~/data_dump/test_1\r\n# \u6a21\u578b\u8f6c\u6362\u6210MLIR\r\n$ mltc-tf -i data:16x224x224x3xf32 -t softmax/Softmax -s resnet34/resnet34.pb -o resnet34/resnet34.mlir\r\n# \u7f16\u8bd1\u6a21\u578b\uff0c\u793a\u4f8b\u53ef\u53c2\u8003\u7f16\u8bd1\u6a21\u578b\u7ae0\u8282\r\n$ python3 compile_resnet34.py\r\n# \u90e8\u7f72ResNet34\u6a21\u578b\uff0c\u793a\u4f8b\u53ef\u53c2\u8003\u5728NPU\u4e0a\u90e8\u7f72\u6a21\u578b\u7ae0\u8282\r\n$ python3 run_resnet34.py\r\n# CPU\u6570\u636e\u83b7\u53d6\uff0c\u793a\u4f8b\u53ef\u53c2\u8003\u5728CPU\u4e0a\u9a8c\u8bc1\u6a21\u578b\u7ae0\u8282\r\n$ python3 run_resnet34_cpu.py\r\n# \u8fd0\u884c\u7cbe\u5ea6\u5206\u6790\u5de5\u5177\u4e2d\u7684NPU\u62fc\u63a5\u811a\u672c\r\n$ cd /root/miniconda3/envs/py310/lib/python3.10/site-packages/mltc/python/tools/dump_memory\r\n$ python3 run_npu_data_analysis.py\r\n# \u8fd0\u884c\u7cbe\u5ea6\u5206\u6790\u811a\u672c\r\n$ python3 run_precision_analysis.py --ref_dtype="float32"\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u6700\u7ec8\u5bf9\u6bd4\u7ed3\u679c\u751f\u6210\u5728\u60a8\u6307\u5b9a\u7684dump\u6570\u636e\u5b58\u653e\u76ee\u5f55\u4e0b\uff0c\u5373\u8bbe\u7f6e\u7684",(0,i.jsx)(e.code,{children:"DUMP_MEMORY_PATH"}),"\u4e0b\uff0c\u5176\u4e2d\u5305\u542b\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"cpu\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662f\u83b7\u53d6\u7f51\u7edc\u6a21\u578b\u5728CPU\u4e0a\u7684\u6570\u636e\u3002\u6570\u636e\u6587\u4ef6\u662f\u6309\u7167\u5b9e\u9645\u7f51\u7edc\u6a21\u578b\u4e2d\u7684\u8282\u70b9\u540d\u79f0\u6765\u547d\u540d\uff0c\u5c06\u540d\u79f0\u4e2d\u7684 \u201c/\u201d \u66ff\u6362\u6210 \u201c_\u201d\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["dump_data\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662fdump\u51fa\u6765\u768416\u8fdb\u5236\u7684\u6570\u636e\u3002\u7ecf\u8fc7",(0,i.jsx)(e.code,{children:"run_npu_data_analysis.py"}),"\u811a\u672c\u8f6c\u6210\u4e8c\u8fdb\u5236\u5f62\u5f0f\u5e76\u8fdb\u884c\u6570\u636e\u62fc\u63a5\uff0c\u6700\u7ec8\u8f93\u51fa\u5230npu\u6587\u4ef6\u5939\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"npu\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662f\u83b7\u53d6\u7f51\u7edc\u6a21\u578b\u5728NPU\u4e0a\u7684\u6570\u636e\uff0c\u547d\u540d\u89c4\u5219\u4e0ecpu\u6587\u4ef6\u5939\u4e2d\u4e00\u6837\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["result\u6587\u4ef6\u5939\uff1a\u4e3b\u8981\u4fdd\u5b58\u7684\u662f\u6700\u7ec8\u5bf9\u6bd4\u5206\u6790\u7ed3\u679c\u3002","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"skip_file_dict.csv\uff1a\u6267\u884c\u6570\u636e\u62fc\u63a5\u524d\u7531\u4e8e\u6821\u9a8c\u9519\u8bef\u800c\u88ab\u8df3\u8fc7\u7684\u8282\u70b9\u4ee5\u53ca\u8be6\u7ec6\u8df3\u8fc7\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"compare_skip.log\uff1a\u6267\u884cCPU\u548cNPU\u6570\u636e\u6bd4\u5bf9\u65f6\u88ab\u8df3\u8fc7\u7684\u8282\u70b9\u4ee5\u53ca\u8be6\u7ec6\u8df3\u8fc7\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"cpu_vs_npu.csv\uff1aCPU\u548cNPU\u6570\u636e\u6bd4\u8f83\u7ed3\u679c\u5206\u6790\u8868\u3002"}),"\n",(0,i.jsx)(e.li,{children:"node_runtime.file\uff1a\u8282\u70b9\u8fd0\u884c\u65f6\u5e8f\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.li,{children:"md5.csv\uff1a\u8bb0\u5f55\u6bcf\u4e2adump\u6587\u4ef6\u7684md5\u503c\u3002"}),"\n",(0,i.jsx)(e.li,{children:"op_name.csv\uff1a\u4ee5\u7b97\u5b50\u540d\u79f0\u547d\u540d\u7684\u9519\u8bef\u7b97\u5b50\u7684\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u7ed3\u679c\u6587\u4ef6\u5177\u4f53\u8bf4\u660e\u53ef\u67e5\u770b\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e",(0,i.jsx)(e.em,{children:"\u7ae0\u8282"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u82e5",(0,i.jsx)(e.code,{children:"--show_grap"}),"\u8bbe\u4e3a",(0,i.jsx)(e.code,{children:"True"}),"\uff0c\u5219\u5728result\u6587\u4ef6\u5939\u4e0b\u8fd8\u4f1a\u663e\u793a\u4ee5\u7b97\u5b50\u540d\u79f0\u547d\u540d\u7684\u9519\u8bef\u7b97\u5b50\u7684\u5206\u6790\u56fe\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"op_name_diff.png\uff1a\u9519\u8bef\u8282\u70b9\u5bf9\u5e94\u7684\u7edd\u5bf9\u8bef\u5dee\u548c\u76f8\u5bf9\u8bef\u5dee\u6563\u70b9\u56fe\u3002"}),"\n",(0,i.jsx)(e.li,{children:"op_name_diff_hist.png\uff1a\u76f8\u5bf9\u8bef\u5dee\u548c\u7edd\u5bf9\u8bef\u5dee\u7684\u76f4\u65b9\u56fe\u5206\u5e03\u3002"}),"\n",(0,i.jsx)(e.li,{children:"op_name_hist.png\uff1aCPU\u548cNPU\u6570\u636e\u7684\u76f4\u65b9\u56fe\u5206\u5e03\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u5206\u6790\u7ed3\u679c",children:"\u5206\u6790\u7ed3\u679c"}),"\n",(0,i.jsx)(e.p,{children:"\u6309\u7167\u4e0a\u8ff0\u6b65\u9aa4\u83b7\u53d6\u7cbe\u5ea6\u540e\uff0c\u5206\u6790\u8bef\u5dee\u8282\u70b9\u7684\u7cbe\u5ea6\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770bcpu_vs_npu.csv\u8868\u4e2d\u7684\u8282\u70b9\u8bef\u5dee\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(5984).A+"",width:"1280",height:"411"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u67e5\u770bnan/inf\u3001errors/total\u548ccos_sim\u4e09\u5217\uff0c\u5206\u6790\u7cbe\u5ea6\u95ee\u9898\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"nan/inf\u5217\u6709\u6570\u636e\u663e\u793aTrue\uff0c\u8bf4\u660e\u51fa\u73b0\u8fc7NaN\u6216inf\u6570\u636e\uff0c\u53ef\u80fd\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.li,{children:"errors/total\u5217\u4e0d\u6ee1\u8db3\u7528\u6237\u8bbe\u7f6e\u7684\u76f8\u5bf9\u8bef\u5dee\u548c\u7edd\u5bf9\u8bef\u5dee\u7684\u4e2a\u6570\u5360\u6bd4\u592a\u5927\uff0c\u53ef\u80fd\u5b58\u5728\u73b0\u7cbe\u5ea6\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.li,{children:"cos_sim\u5217\u6570\u503c\u5c0f\u4e8e0.95\uff0c\u53ef\u80fd\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a\u6bcf\u4e00\u5217\u6570\u636e\u7684\u5177\u4f53\u8bf4\u660e\u53ef\u67e5\u770b",(0,i.jsx)(e.em,{children:"\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e"}),"\u7ae0\u8282\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u82e5\u9047\u5230csv\u6587\u4ef6\u4e2d\u65e0\u6cd5\u663e\u793a\u5b8c\u6574\u7684\u5927\u6279\u91cf\u9519\u8bef\u6570\u636e\u5e76\u4e14\u662f\u6309\u7167index\u6392\u5217\uff0c\u65e0\u6cd5\u786e\u5b9a\u54ea\u4e00\u4e2a\u8282\u70b9\u8bef\u5dee\u8f83\u5927\u3002\u53ef\u81ea\u884c\u5bf9\u6bd4cpu\u6587\u4ef6\u5939\u4e0enpu\u6587\u4ef6\u5939\u4e2d\u7684\u6570\u636e\u6587\u4ef6\uff0c\u5206\u6790\u7cbe\u5ea6\u8bef\u5dee\u7684\u539f\u56e0\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u7f51\u7edc\u6a21\u578b\u5728cpu\u548cnpu\u4e0a\u7684\u6570\u636e\u683c\u5f0f\uff0c\u6570\u636e\u683c\u5f0f\u53ef\u80fd\u5b58\u5728NHWC\u6216NCHW\u3002\u5bf9\u6bd4\u65f6\u5982\u679cCPU\u4e0eNPU\u4e0a\u7684\u6570\u636e\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u9700\u8981\u5148\u4f7f\u7528transpose\u51fd\u6570\u6539\u53d8\u6570\u636e\u6392\u5e03\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6b64\u5916\uff0c\u82e5",(0,i.jsx)(e.code,{children:"--show_grap"}),"\u8bbe\u4e3a",(0,i.jsx)(e.code,{children:"True"}),"\uff0c\u53ef\u67e5\u770b\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\u8282\u70b9\u7684\u5206\u6790\u56fe\u3002"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u9519\u8bef\u8282\u70b9\u5bf9\u5e94\u7684\u7edd\u5bf9\u8bef\u5dee\u548c\u76f8\u5bf9\u8bef\u5dee\u6563\u70b9\u56fe\uff08op_name_diff.png\uff09\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(6167).A+"",width:"952",height:"547"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"CPU\u548cNPU\u6570\u636e\u7684\u76f4\u65b9\u56fe\u5206\u5e03\uff08op_name_hist.png\uff09\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(3793).A+"",width:"897",height:"514"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u76f8\u5bf9\u8bef\u5dee\u548c\u7edd\u5bf9\u8bef\u5dee\u7684\u76f4\u65b9\u56fe\u5206\u5e03\uff08op_name_diff_hist.png\uff09\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(9742).A+"",width:"894",height:"510"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e",children:"\u7ed3\u679c\u6587\u4ef6\u8bf4\u660e"}),"\n",(0,i.jsx)(e.h5,{id:"cpu_vs_npucsv",children:"cpu_vs_npu.csv"}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u63cf\u8ff0\uff1a\u6700\u7ec8\u7684\u7cbe\u5ea6\u5bf9\u6bd4\u5206\u6790\u7ed3\u679c\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(8055).A+"",width:"1280",height:"233"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u6bb5\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u5b57\u6bb5\u540d"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u63cf\u8ff0"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"op_name"}),(0,i.jsx)(e.td,{children:"\u7f51\u7edc\u4e2d\u8282\u70b9\u7684\u540d\u79f0\uff08\u9644\u5e26\u663e\u793aatol/rtol\u53c2\u6570\u503c\uff09\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"nan/inf"}),(0,i.jsx)(e.td,{children:"NPU\u7ed3\u679c\u6570\u636e\u4e2d\u662f\u5426\u51fa\u73b0\u8fc7nan\u6216inf\u6570\u636e\uff08\u6bd4\u8f83\u524dnan\u4f1a\u88ab\u8f6c\u62100\uff0cinf\u4f1a\u88ab\u8f6c\u6210\u6700\u5927\u503c\uff09\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"errors/total"}),(0,i.jsx)(e.td,{children:"\u4e0d\u6ee1\u8db3\u7528\u6237\u8bbe\u7f6e\u7684\u76f8\u5bf9\u8bef\u5dee\u548c\u7edd\u5bf9\u8bef\u5dee\u7684\u4e2a\u6570/\u5f53\u524d\u7b97\u5b50\u7684\u603b\u4e2a\u6570\uff08\u5355\u4f4d\uff1a\u4e2a\uff09\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"cos_sim"}),(0,i.jsx)(e.td,{children:"NPU\u7ed3\u679c\u548cCPU\u7ed3\u679c\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff0c\u6570\u636e\u8d8a\u5927\u8d8a\u597d\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"1st_diff_offset/offset_dim/data_shape"}),(0,i.jsx)(e.td,{children:"\u7b2c\u4e00\u4e2a\u6570\u636e\u9519\u8bef\u7684\u4f4d\u7f6e\uff0c\u5bf9\u5e94\u7684\u7ef4\u5ea6\u4fe1\u606f\uff0c\u6570\u636eshape\u4fe1\u606f\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"ref_value"}),(0,i.jsx)(e.td,{children:"\u6807\u51c6\u6a21\u578b\uff08TensorFlow\u6a21\u578b\u3001ONNX\u6a21\u578b\uff09\u7b2c\u4e00\u4e2a\u53d1\u751f\u9519\u8bef\u65f6\u7684\u6570\u636e\uff08\u76ee\u524d\u4ec5\u4fdd\u7559\u5c0f\u6570\u70b9\u540e6\u4f4d\u6709\u6548\u6570\u5b57\uff09\uff0c\u82e5\u5f53\u524d\u7b97\u5b50\u5747\u672a\u53d1\u751f\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\uff0c\u6b64\u65f6\u7684\u503c\u4e3a\u7b97\u5b50\u8f93\u51fa\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"npu_value"}),(0,i.jsx)(e.td,{children:"\u57fa\u4e8e\u4e5d\u7ae0NPU\u6846\u67b6\u7684\u63a8\u7406\u6a21\u578b\uff0c\u7b2c\u4e00\u4e2a\u53d1\u751f\u9519\u8bef\u65f6\u7684\u6570\u636e\uff08\u76ee\u524d\u4ec5\u4fdd\u7559\u5c0f\u6570\u70b9\u540e6\u4f4d\u6709\u6548\u6570\u5b57\uff09\uff0c\u82e5\u5f53\u524d\u7b97\u5b50\u5747\u672a\u53d1\u751f\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\uff0c\u6b64\u65f6\u7684\u503c\u4e3a\u7b97\u5b50\u8f93\u51fa\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"max_abs_err"}),(0,i.jsx)(e.td,{children:"\u8282\u70b9\u9519\u8bef\u6570\u636e\u7684\u6700\u5927\u7edd\u5bf9\u8bef\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mean_abs_err"}),(0,i.jsx)(e.td,{children:"\u8282\u70b9\u9519\u8bef\u6570\u636e\u7684\u5e73\u5747\u7edd\u5bf9\u8bef\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"max_abs_total"}),(0,i.jsx)(e.td,{children:"\u8282\u70b9\u6570\u636e\u7684\u6700\u5927\u76f8\u5bf9\u8bef\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mean_abs_total"}),(0,i.jsx)(e.td,{children:"\u8282\u70b9\u6570\u636e\u7684\u5e73\u5747\u76f8\u5bf9\u8bef\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"mean"}),(0,i.jsx)(e.td,{children:"\u53c2\u8003\u6570\u636e\uff08TensorFlow\u6a21\u578b\u3001ONNX\u6a21\u578b\u7684\u6570\u636e\uff09\u7684\u5747\u503c\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"std"}),(0,i.jsx)(e.td,{children:"\u53c2\u8003\u6570\u636e\uff08TensorFlow\u6a21\u578b\u3001ONNX\u6a21\u578b\u7684\u6570\u636e\uff09\u7684\u65b9\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"rms"}),(0,i.jsx)(e.td,{children:"\u53c2\u8003\u6570\u636e\uff08TensorFlow\u6a21\u578b\u3001ONNX\u6a21\u578b\u7684\u6570\u636e\uff09\u7684\u5747\u65b9\u6839\u503c\uff08root mean square\uff09\u3002"})]})]})]}),"\n",(0,i.jsx)(e.h5,{id:"op_namecsv",children:"op_name.csv"}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u63cf\u8ff0\uff1a\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\u7b97\u5b50\u8be6\u7ec6\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(7996).A+"",width:"419",height:"158"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b57\u6bb5\u8bf4\u660e\uff1a"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u5b57\u6bb5\u540d"})}),(0,i.jsx)(e.th,{children:(0,i.jsx)(e.strong,{children:"\u8bf4\u660e"})})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"index"}),(0,i.jsx)(e.td,{children:"\u7cbe\u5ea6\u5bf9\u6bd4\u5931\u8d25\u53d1\u751f\u7684\u7d22\u5f15\u53f7\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"std_value"}),(0,i.jsx)(e.td,{children:"\u6807\u51c6\u6a21\u578b\u76f8\u5e94\u7d22\u5f15\u4f4d\u7f6e\u7684\u503c\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"npu_value"}),(0,i.jsx)(e.td,{children:"\u4e5d\u7ae0NPU\u6a21\u578b\u76f8\u5e94\u7d22\u5f15\u4f4d\u7f6e\u7684\u503c\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"abs_diff"}),(0,i.jsx)(e.td,{children:"\u7edd\u5bf9\u8bef\u5dee\u3002"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"relative_diff"}),(0,i.jsx)(e.td,{children:"\u76f8\u5bf9\u8bef\u5dee\u3002"})]})]})]}),"\n",(0,i.jsx)(e.h4,{id:"\u8bef\u5dee\u7c7b\u578b\u53ca\u5224\u65ad\u65b9\u6cd5",children:"\u8bef\u5dee\u7c7b\u578b\u53ca\u5224\u65ad\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.p,{children:"NPU\u6bcf\u4e2a\u8282\u70b9\u8ba1\u7b97\u8f93\u51fa\u7684\u8bef\u5dee\u53ef\u4ee5\u5206\u4e3a\u4e24\u7c7b\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8ba1\u7b97\u9519\u8bef\uff1a\u7531\u786c\u4ef6\u6216\u8f6f\u4ef6Bug\u95ee\u9898\u5bfc\u81f4\u7684\u9519\u8bef\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u7d2f\u79ef\u7cbe\u5ea6\u8bef\u5dee\uff1a\u7531\u4e8e\u5728NPU\u4e0a\u91c7\u7528FP16\u8ba1\u7b97\uff0c\u76f8\u5bf9\u4e8eCPU\u4e0a\u4f7f\u7528FP32\u8ba1\u7b97\u5b58\u5728\u7cbe\u5ea6\u635f\u5931\uff0c\u5e76\u4e14\u8fd9\u4e2a\u7cbe\u5ea6\u635f\u5931\u9010\u5c42\u7d2f\u79ef\u9020\u6210\u7684\u8bef\u5dee\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u5176\u4ed6\u7cbe\u5ea6\u95ee\u9898",children:"\u5176\u4ed6\u7cbe\u5ea6\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"CPU\u4e0eNPU\u8f93\u51fa\u7ed3\u679c\u5747\u5b58\u5728NaN\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u53d1\u73b0CPU\u4e0eNPU\u8fd0\u884c\u51fa\u6765\u7684\u7ed3\u679c\u90fd\u5b58\u5728NaN\u7684\u95ee\u9898\u65f6\uff0c\u53ef\u8003\u8651\u7f51\u7edc\u6a21\u578b\u672c\u8eab\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u5b58\u5728\u6a21\u578b\u4e2d\u7b97\u5b50\u7684\u53c2\u6570\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u80fd\u662f\u7b97\u5b50\u53c2\u6570\u4e3ainf\uff0c\u4f7f\u5f97\u4e0e\u5176\u4ed6\u6570\u5b57\u76f8\u4e58\u4f1a\u51fa\u9519\uff0c\u5bfc\u81f4\u7ed3\u679c\u90fd\u662fNaN\uff0c\u6b64\u65f6\u5e94\u8003\u8651\u7b97\u5b50\u95ee\u9898\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53ef\u80fd\u662f\u6a21\u578b\u8f93\u5165\u4e0d\u5408\u9002\uff0c\u4f8b\u5982\u8f93\u5165\u4e2d\u5305\u542b\u8d1f\u6570\uff0c\u800c\u7f51\u7edc\u6a21\u578b\u4e2d\u5b58\u5728Log\u8fd9\u4e00\u7c7b\u7684\u7b97\u5b50\uff0c\u7ecf\u8fc7\u8be5\u8282\u70b9\u662f\u4f1a\u51fa\u73b0\u8ba1\u7b97\u9519\u8bef\uff0c\u4f7f\u5f97CPU\u548cNPU\u7684\u8fd0\u884c\u7ed3\u679c\u4e3aNaN\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"CPU\u8f93\u51fa\u6b63\u5e38\u800cNPU\u7ed3\u679c\u4e3aNaN\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5f53\u53d1\u73b0CPU\u7684\u8f93\u51fa\u6b63\u5e38\u800cNPU\u8fd0\u884c\u51fa\u6765\u7684\u7ed3\u679c\u4e3aNaN\u7684\u95ee\u9898\u65f6\uff0c\u53ef\u8003\u8651\u662f\u7b97\u5b50\u53c2\u6570\u5bfc\u81f4\uff0c\u5176\u8868\u73b0\u662f\u4e2d\u95f4\u8f93\u51fa\u7ed3\u679c\u8d85FP16\u8303\u56f4\uff0865504\uff09\uff0c\u901a\u5e38\u4e24\u4e2a\u5927\u6570\u76f8\u4e58\u6216\u8005\u9664\u4ee5\u4e00\u4e2a\u6781\u5c0f\u7684\u6570\u65f6\u5bb9\u6613\u51fa\u73b0\u7ed3\u679c\u8d85\u51faFP16\u8303\u56f4\u95ee\u9898\uff0865504\uff09\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u7cbe\u5ea6\u5206\u6790\u5b9a\u4f4d\u6280\u5de7",children:"\u7cbe\u5ea6\u5206\u6790\u5b9a\u4f4d\u6280\u5de7"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u968f\u673a\u7cbe\u5ea6\u95ee\u9898\u5b9a\u4f4d"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u7f51\u7edc\u5b58\u5728\u968f\u673a\u7cbe\u5ea6\u95ee\u9898\u4e14\u5728\u6253\u5f00Dump Memory\u529f\u80fd\u65f6\u4e5f\u5b58\u5728\u968f\u673a\u95ee\u9898\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u6cd5\u5b9a\u4f4d\uff1a"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c06\u6a21\u578b\u7f51\u7edc\u8fd0\u884c\u4e24\u904d\uff0c\u6570\u636e\u5206\u522bdump\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u8def\u5f84\u4e0b\uff0c\u7136\u540e\u5206\u522b\u8fd0\u884c",(0,i.jsx)(e.code,{children:"run_npu_data_analysis.py"}),"\u811a\u672c\uff0c\u5728\u811a\u672c\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8fd0\u884c\u5b8c\u4e0b\u56fe\u4e2d\u7b2c\u4e00\u4e2a\u8fdb\u5ea6\u6761\u540e\u5c31\u53ef\u505c\u6b62\uff0c\u5de5\u5177\u4f1a\u8ba1\u7b97\u6bcf\u4e2adump\u6587\u4ef6\u7684md5\u5e76\u8bb0\u5f55\u5728",(0,i.jsx)(e.code,{children:"result/md5.csv"}),"\u6587\u4ef6\u4e2d\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(9474).A+"",width:"1280",height:"119"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6bd4\u8f83\u4e24\u4e2adump\u8def\u5f84\u4e0b\u7684",(0,i.jsx)(e.code,{children:"result/md5.csv"}),"\u6587\u4ef6\u5c31\u80fd\u77e5\u9053\u90a3\u4e2a\u8282\u70b9\u7684\u8f93\u51fa\u5b58\u5728\u968f\u673a\u95ee\u9898\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u6b64\u5916\u53ef\u4ee5\u89c2\u5bdfmd5\u503c\u662f\u5426\u662f\u53d8\u5316\uff0c\u6765\u5224\u65ad\u7f51\u7edc\u662f\u5426\u5b58\u5728\u968f\u673a\u7cbe\u5ea6\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(586).A+"",width:"1280",height:"119"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u8dd1stc-run\u8fdb\u884c\u7cbe\u5ea6\u5206\u6790"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u4fee\u6539\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u5f15\u5165\u4e00\u4e9b\u95ee\u9898\u5bfc\u81f4\u4e4b\u524d\u7cbe\u5ea6\u6b63\u786e\u7684\u7f51\u7edc\u51fa\u73b0\u7cbe\u5ea6\u9519\u8bef\u95ee\u9898\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u52a0\u901f\u5b9a\u4f4d\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5206\u522b\u83b7\u53d6\u7cbe\u5ea6\u6b63\u786e\u548c\u7cbe\u5ea6\u9519\u8bef\u7684\u7f51\u7edc\u7684NPU\u4e0a\u7684\u6570\u636e\uff0cdump\u6570\u636e\u540e\u4f7f\u7528",(0,i.jsx)(e.code,{children:"run_npu_data_analysis.py"}),"\u811a\u672c\u5b8c\u6210\u6570\u636e\u62fc\u63a5\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u5c06\u7cbe\u5ea6\u6b63\u786e\u7684\u7f51\u7edcDump\u51fa\u6765\u7684\u653e\u5728npu\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709NPU\u6570\u636e\u6587\u4ef6\uff0c\u62f7\u8d1d\u5230\u7cbe\u5ea6\u9519\u8bef\u7f51\u7edc\u7684cpu\u6587\u4ef6\u5939\u4e0b\uff0c\u4f5c\u4e3a\u53c2\u8003\u6570\u636e\u8fdb\u884c\u5bf9\u6bd4\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"run_precision_analysis.py"}),"\u811a\u672c\u5bf9\u6bd4\u6570\u636e\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u76f8\u6bd4\u8dd1stc-run\u7684\u4f18\u52bf\u5728\u4e8e\uff0c\u53c2\u8003\u7ed3\u679c\u4e5f\u662f\u7531NPU\u8fd0\u884c\u83b7\u53d6\u7684\uff0c\u7cbe\u5ea6\u5bf9\u6bd4\u6570\u636e\u5dee\u5f02\u51e0\u4e4e\u6ca1\u6709\uff0c\u8fdb\u800c\u907f\u514d\u4e86\u67e5\u770b\u7cbe\u5ea6\u5206\u6790\u7ed3\u679c\u65f6\u8003\u8651FP16\u7d2f\u52a0\u5f15\u5165\u7684\u4e0d\u786e\u5b9a\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"stc-run\u8fd0\u884c\u5931\u8d25\u95ee\u9898"}),"\n",(0,i.jsx)(e.p,{children:"\u76ee\u524dstc-run\u652f\u6301\u7684\u7b97\u5b50\u53ca\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\u5e76\u4e0d\u5b8c\u5584\uff0c\u5728\u8dd1stc-run\u65f6\u53ef\u80fd\u9047\u5230folder\u5931\u8d25\u95ee\u9898\uff0c\u6b63\u5728\u5b8c\u5584\u4fee\u590d\u4e2d\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91cd\u590d/\u4e22\u5931\u8282\u70b9\u95ee\u9898"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u91cd\u590d\u8282\u70b9\u95ee\u9898\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"PASS\u5728Span\u4f20\u9012\u8fc7\u7a0b\u4e2d\u5404\u79cd\u539f\u56e0\u5bfc\u81f4Span\u91cd\u540d\u95ee\u9898\uff0c\u5bfc\u81f4dump\u51fa\u6765\u7684\u8282\u70b9\u540d\u79f0\u51fa\u73b0\u91cd\u590d\u7684\u73b0\u8c61\uff0c\u5de5\u5177\u5728\u5206\u6790\u8fc7\u7a0b\u4e2d\u4f1a\u62a5\u4ee5\u4e0b\u9519\u8bef\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(8163).A+"",width:"764",height:"275"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e22\u5931\u8282\u70b9\u95ee\u9898\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u8282\u70b9\u540d\u91cd\u590d\u5bfc\u81f4\u4fe1\u606f\u4e0d\u4e00\u81f4\uff0c\u4f1a\u51fa\u73b0\u8282\u70b9\u4e22\u5931\u7684\u73b0\u8c61\uff0c\u5de5\u5177\u5728\u5206\u6790\u8fc7\u7a0b\u4e2d\u4e2d\u4f1a\u62a5\u4ee5\u4e0b\u9519\u8bef\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(2888).A+"",width:"629",height:"124"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0a\u8ff0\u4e24\u4e2a\u8282\u70b9\u95ee\u9898\u7684\u9519\u8bef\u65e5\u5fd7\u4f1a\u8bb0\u5f55\u5728",(0,i.jsx)(e.code,{children:"result/skip_file_dict.csv"}),"\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(753).A+"",width:"1044",height:"80"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u591a\u8f6e\u8fd0\u884c\u5bfc\u81f4\u4f2a\u91cd\u590d\u8282\u70b9\u95ee\u9898"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u83b7\u53d6\u5927\u6a21\u578b\u6570\u636e\u65f6\u53ea\u80fd\u8dd1\u5355\u8f6e\uff0c\u591a\u8f6e\u8fd0\u884c\u4f1a\u5bfc\u81f4Span\u91cd\u590d\u95ee\u9898\u3002\u67e5\u770b\u6570\u636e\u5982\u4f55\u533a\u5206\u662f\u4e0d\u662f\u591a\u8f6edump\u5bfc\u81f4\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\uff0c\u5982\u679c\u6587\u4ef6\u6570\u591a\u4e8e1\u4e2a\uff0c\u8bf4\u660e\u662f\u8dd1\u591a\u8f6e\u5bfc\u81f4\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ ls dump_data/0/0_map_name@0.*\r\ndump_data/0/0_map_name@0.011fda60_000001d2.dat dump_data/0/0_map_name@0.013fda60_000001d2.dat\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u4e0d\u652f\u6301dump\u7684\u7b97\u5b50"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u62f7\u8d1d\u7c7b\u7b97\u5b50\u6682\u4e0d\u652f\u6301dump\u529f\u80fd\uff0c\u4f8b\u5982slice/concat/split\u7b49\u7b97\u5b50\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u751f\u6210\u91cf\u5316\u6a21\u578b",children:"\u751f\u6210\u91cf\u5316\u6a21\u578b"}),"\n",(0,i.jsx)(e.p,{children:"\u91cf\u5316\u5de5\u5177\u53ef\u4ee5\u5bf9\u6a21\u578b\u8fdb\u884cPTQ\u91cf\u5316\uff0c\u91cf\u5316\u5de5\u5177\u80fd\u591f\u76f4\u63a5\u652f\u6301\u7684\u6a21\u578b\u683c\u5f0f\u6709ONNX\u3001CAFFE\uff0c\u5176\u4ed6\u6a21\u578b\u6a21\u578b\u683c\u5f0f\u9700\u5148\u8f6c\u6210ONNX\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"mg",src:r(8822).A+"",width:"674",height:"432"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u5982\u679c\u5728GPU\u4e0a\u4f7f\u7528\u5de5\u5177\uff0c\u8bf7\u5b89\u88c5CUDA 11.8\u7248\u672c\u3001CUDA\u9a71\u52a8\uff08cuda-repo-ubuntu2004-12-1-local_12.1.0-530.30.02-1_amd64.deb\uff09\u4ee5\u53ca\u663e\u5361\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4-4",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5Bert128\u6a21\u578b\u4e3a\u4f8b\u6f14\u793a\u6267\u884c\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u786e\u4fdd\u5df2\u7ecf\u83b7\u53d6MLTC\u548c\u91cf\u5316\u5de5\u5177\u6587\u4ef6\u5b89\u88c5\u5305\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5b89\u88c5MLTC\u65f6\u5df2\u5305\u542b\u91cf\u5316\u5de5\u5177\u811a\u672c\uff08auto_quant\uff09\uff0c\u91cf\u5316\u5de5\u5177\u4f9d\u8d56\u6587\u4ef6\u5b89\u88c5MLTC\u540c\u7ea7\u76ee\u5f55\u4e0b\u7684ppq\u6587\u4ef6\u4e2d\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6eYAML\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u7f51\u7edc\u7684\u4e0d\u540c\u586b\u5199\u6a21\u578b\u8fd0\u884c\u7684\u57fa\u672c\u53c2\u6570\uff0c\u5982\u679c\u6a21\u578b\u4e0d\u662fONNX\u683c\u5f0f\u7684\u9700\u8981\u505a\u6a21\u578b\u8f6c\u6362\uff0c\u5185\u90e8\u63d0\u4f9b\u4e86pb\u4e0epth\u6a21\u578b\u7684\u8f6c\u5316\u3002\u91cf\u5316\u7b56\u7565\u4e0e\u7cbe\u5ea6\u6821\u51c6\u53ef\u4ee5\u6839\u636e\u6a21\u578b\u9a8c\u8bc1\u7ed3\u679c\u81ea\u884c\u8c03\u8282\uff0c\u627e\u5230\u5408\u9002\u5f53\u524d\u7f51\u7edc\u7684\u7b56\u7565\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0b\u662fBert128\u6a21\u578b\u7684YAML\u6587\u4ef6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:'# ----------------------------------------------------------\r\n# \u6a21\u578b\u8fd0\u884c\u57fa\u672c\u53c2\u6570\r\n# ----------------------------------------------------------\r\n\r\nmodel_name: "bert_128"\r\nlocal_model_path: "./bert_128_tf.onnx"\r\ninput_name: ["embedding_lookup:0","input_mask:0","one_hot:0"]\r\ninput_shape: [[1024,768],[8,1,128],[1024,2]]\r\ninput_dtype: ["torch.float32", "torch.float32", "torch.float32"]\r\nbatch_size: 64\r\noutput_node: "loss/Softmax:0"\r\n# ----------------------------------------------------------\r\n# \u6a21\u578b\u8f6c\u4e3aonnx\r\n# ----------------------------------------------------------\r\n\r\n# \u662f\u5426\u9700\u8981\u8f6c\u5316\u4e3aONNX\u6a21\u578b\uff0cTrue\uff1a\u82e5\u8f93\u5165\u6a21\u578b\u4e0d\u662fonnx,\u9700\u8981\u8f6c\u6362 False\uff1a\u4e0d\u9700\u8981\u8f6c\u6362\r\nis_translate: False\r\n# \u63d0\u4f9b\u4e24\u79cd\u6a21\u578b\u7684\u8f6c\u6362\uff1apb, pth\r\nmodel_type: "onnx"\r\nonnx_target_file: "./bert_128.onnx"\r\n\r\n# ----------------------------------------------------------\r\n# \u6a21\u578b\u8f93\u5165\u6570\u636e\r\n# ----------------------------------------------------------\r\n\r\n# \u8f93\u5165\u662f\u5426\u5df2\u7ecf\u7ecf\u8fc7\u9884\u5904\u7406\uff0cTrue: \u5df2\u7ecf\u8fc7\u9884\u5904\u7406\uff0c\u53ef\u4ece\u672c\u5730\u76f4\u63a5\u8bfb\u53d6\uff0c False: \u672a\u7ecf\u8fc7\u9884\u5904\u7406\uff0c\u9700\u8981\u6dfb\u52a0\u9884\u5904\u7406\u51fd\u6570\uff0c\u8fd4\u56de\u6a21\u578b\u8f93\u5165\u6570\u636e\r\ninput_preprocess: False\r\n# \u5df2\u9884\u5904\u7406\u540e\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u6a21\u578b\u8fd0\u884c\r\n# \u63d0\u4f9b\u4e24\u79cd\u6587\u4ef6\u8bfb\u53d6\uff1anpy, bin\r\n# \u9ed8\u8ba4\u6587\u4ef6\u547d\u540d\u683c\u5f0f\uff1afile_path+file_name+index+file_type\r\n#                 ./bert128_datasets/embedding_look_up_0.npy\r\ndataset:\r\n      file_type: "npy"\r\n      file_path: "./bert128_dataset/"\r\n      file_name: ["embedding_lookup_","input_mask_","one_hot_"]\r\n\r\n# \u672a\u9884\u5904\u7406\u7684\u6570\u636e\uff0c\u8bf7\u4fee\u6539\u9884\u5904\u7406\u811a\u672c\u6587\u4ef6\uff0c\u63d0\u4f9b\u6821\u51c6\u6570\u636e\uff0c8-256\u7ec4\u5373\u53ef\r\n# def pre_process(config:dict, data_num:int) -> List[{inputname_0:tensor,inputname_1:tensor},...]:\r\n#    ...\r\n# \u9884\u5904\u7406\u811a\u672c\u6587\u4ef6\u540d\r\npre_process: "pre_process"\r\nfile_list: []\r\n\r\n# ----------------------------------------------------------\r\n# \u91cf\u5316\u7b56\u7565, \u76ee\u524d\u5728NPUv1\u4e0a\u53ef\u4ee5\u6539\u52a8\u7684\u6709\u9650 \r\n# ----------------------------------------------------------\r\n\r\n# \u91cf\u5316\u603b\u5f00\u5173 \r\ndo_quantize: true\r\ntarget_file: "./bert128_quant.onnx"\r\n\r\n# \u53c2\u6570\u53ef\u9009\u9879\uff1a\r\n#        calibrate: kl, minmax, percentile, mse\r\n#        round: ROUND_TOWARDS_ZERO, ROUND_HALF_EVEN\r\n#        policy: PerTensor, PerChannel\r\n#        # \u6309\u7167\u54ea\u4e2a\u8f74\u505aper_channel \u5f00\u542fPerChannel\u65f6\u9700\u8981\u6307\u5b9a\uff0cPerTensor\u4e0d\u53ef\u5305\u542b\u8fd9\u6761\u5c5e\u6027\r\n#        channel_axis: -2, -1, 0, 1\r\n#        Symmetric: true, false(open asymmetric)\r\nconv:\r\n  activation:\r\n    calibrate: "kl"\r\n    round: "ROUND_TOWARDS_ZERO"\r\n    policy: "PerTensor"\r\n    Symmetric: true\r\n  parameter:\r\n    calibrate: "minmax" \r\n    round: "ROUND_HALF_EVEN"\r\n    policy: "PerChannel"\r\n    Symmetric: true\r\n    channel_axis: 0\r\n\r\nmatmul:\r\n  activation:\r\n    calibrate: "kl"\r\n    round: "ROUND_TOWARDS_ZERO"\r\n    policy: "PerTensor"\r\n    Symmetric: true\r\n  parameter:\r\n    calibrate: "minmax" \r\n    round: "ROUND_HALF_EVEN"\r\n    policy: "PerChannel"\r\n    Symmetric: true\r\n    channel_axis: 1\r\n\r\n# ----------------------------------------------------------\r\n# \u91cf\u5316\u7cbe\u5ea6\u6821\u51c6\u9009\u9879\uff0c\u4e0d\u6539\u53d8\u91cf\u5316\u7b56\u7565\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3b\u8981\u901a\u8fc7\u5173\u95ed\u91cf\u5316\u8bef\u5dee\r\n# \u8f83\u5927\u7684\u7b97\u5b50\u6765\u63d0\u9ad8\u7cbe\u5ea6\r\n# ----------------------------------------------------------\r\n\r\n# \u603b\u5f00\u5173\u2014\u2014\u2014\u2014\u662f\u5426\u5f00\u542f\u5173\u95ed\u7b97\u5b50\u6765\u63d0\u9ad8\u91cf\u5316\u7cbe\u5ea6\r\nclose_op: true\r\n# \u5173\u95ed\u8bef\u5dee\u6700\u5927\u7684\u7b97\u5b50\u6570\u91cf\r\nclose_op_num: 0\r\n# \u5173\u95ed\u91cf\u5316\u7cbe\u5ea6\u5c0f\u4e8e\u9608\u503c\u7684\u6240\u6709\u7b97\u5b50\uff0cclose_op_num\u4e3a0\u65f6\u751f\u6548\r\nclose_value: 0.999\r\n# \u5173\u95ed\u6307\u5b9a\u7b97\u5b50\uff0c\u586b\u5165\u7b97\u5b50\u540d\u79f0\r\nclose_op_name: []\r\n\r\n# \u5bfb\u627e\u6700\u4f18\u6fc0\u6d3b\u6821\u51c6\u65b9\u5f0f\r\nactivate_calib_algo: false\r\n\r\n# ----------------------------------------------------------\r\n# \u6a21\u578b\u7cbe\u5ea6\u9a8c\u8bc1\u65b9\u5f0f\r\n# ----------------------------------------------------------\r\n\r\n# ppq\u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u6807\u5fd7\uff0c\u5f00\u542f\u65f6\u4e0d\u8fdb\u884c\u6fc0\u6d3b\u51fd\u6570\u2014\u2014\u2014\u2014gelu\u878d\u5408\r\ntest_flag: true\r\n# \u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\r\n# def quantonnxrun(config:dict):\r\n#    ...\r\n# \u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\u6587\u4ef6\u540d\r\ntest_run: test_run\r\n# \u9a8c\u8bc1\u6570\u636e\u7ec4\u6570\r\ntest_num: 5\r\natol: 0.04\r\nrtol: 0.01\r\n\r\n# \u6a21\u578b\u8fd0\u884c\u8bbe\u5907\uff08cpu\u3001cuda\uff09\r\ndevice: cpu\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u8f93\u5165\u6570\u636e\u5982\u679c\u672a\u7ecf\u8fc7\u9884\u5904\u7406\uff0c\u9700\u8981\u6dfb\u52a0\u9884\u5904\u7406\u51fd\u6570\uff0c\u5e76\u5728YAML\u6587\u4ef6\u4e2d\u6807\u660e\u9884\u5904\u7406\u811a\u672c\u3002Bert128\u7684\u9884\u5904\u7406\u811a\u672c\u53ef\u53c2\u8003\u4ee3\u7801\u793a\u4f8b\u4e2d\u7684",(0,i.jsx)(e.code,{children:"pre_process.py"}),"\u3002\u5df2\u7ecf\u505a\u597d\u4e86\u9884\u5904\u7406\u7684\u6570\u636e\u4e0d\u4e00\u5b9a\u9002\u5408\u6240\u6709\u573a\u666f\uff0c\u6240\u4ee5\u4e3a\u4e86\u91cf\u5316\u6548\u679c\u66f4\u52a0\u5b8c\u5584\uff0c\u5efa\u8bae\u7528\u6237\u9009\u53d6\u81ea\u5df1\u9700\u8981\u7684\u6821\u51c6\u96c6\u6765\u8fdb\u884c\u7f51\u7edc\u91cf\u5316\u3002"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-YAML",children:'# \u8f93\u5165\u662f\u5426\u5df2\u7ecf\u7ecf\u8fc7\u9884\u5904\u7406\uff0ctrue: \u5df2\u7ecf\u8fc7\u9884\u5904\u7406\uff0c\u53ef\u4ece\u672c\u5730\u76f4\u63a5\u8bfb\u53d6\uff0c False: \u672a\u7ecf\u8fc7\u9884\u5904\u7406\uff0c\u9700\u8981\u6dfb\u52a0\u9884\u5904\u7406\u51fd\u6570\uff0c\u8fd4\u56de\u6a21\u578b\u8f93\u5165\u6570\u636e\r\ninput_preprocess: False\r\n# \u5df2\u9884\u5904\u7406\u540e\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165\u6a21\u578b\u8fd0\u884c\r\n# \u63d0\u4f9b\u4e24\u79cd\u6587\u4ef6\u8bfb\u53d6\uff1anpy, bin\r\n# \u9ed8\u8ba4\u6587\u4ef6\u547d\u540d\u683c\u5f0f\uff1afile_path+file_name+index+file_type\r\n#                 ./bert128_datasets/embedding_look_up_0.npy\r\ndataset:\r\n      file_type: "npy"\r\n      file_path: "./bert128_dataset/"\r\n      file_name: ["embedding_lookup_","input_mask_","one_hot_"]\r\n\r\n# \u672a\u9884\u5904\u7406\u7684\u6570\u636e\uff0c\u8bf7\u4fee\u6539\u9884\u5904\u7406\u811a\u672c\u6587\u4ef6\uff0c\u63d0\u4f9b\u6821\u51c6\u6570\u636e\uff0c8-256\u7ec4\u5373\u53ef\r\n# def pre_process(config:dict, data_num:int) -> List[{inputname_0:tensor,inputname_1:tensor},...]:\r\n#    ...\r\n# \u9884\u5904\u7406\u811a\u672c\u6587\u4ef6\u540d\r\npre_process: "pre_process"\r\nfile_list: []\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u7cbe\u5ea6\u6709\u8981\u6c42\u7684\u6a21\u578b\uff0c\u53ef\u63a5\u5165\u7ed3\u6784\u7684\u540e\u5904\u7406\uff0c\u6dfb\u52a0\u7ed3\u679c\u5bf9\u6bd4\u4ee3\u7801\uff0c\u5e76\u5728YAML\u6587\u4ef6\u4e2d\u6807\u660e\u9884\u5904\u7406\u811a\u672c\u3002Bert128\u7684\u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\u53ef\u53c2\u8003\u4ee3\u7801\u793a\u4f8b\u4e2d\u7684",(0,i.jsx)(e.code,{children:"test_tun.py"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u539f\u59cb\u6a21\u578b\u4e0e\u91cf\u5316\u540e\u7684\u6a21\u578b\u90fd\u4f1a\u8fd0\u884c\uff0c\u53ef\u5bf9\u5b83\u4eec\u7684\u7ed3\u679c\u8fdb\u884c\u6bd4\u8f83\uff0c\u5f97\u5230\u7cbe\u5ea6\u5bf9\u6bd4\u7ed3\u679c\u3002\u4e0d\u540c\u7f51\u7edc\u7684\u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\u9700\u8981\u6839\u636e\u7528\u6237\u81ea\u5df1\u5bf9\u7f51\u7edc\u7684\u7ed3\u679c\u8bc4\u5224\u6807\u51c6\u81ea\u5df1\u6784\u5efa\u4ee3\u7801\u3002"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u6d4b\u8bd5\u6a21\u5757\u4f7f\u7528\u7684\u662fONNX Runtime\u8fd0\u884c\uff0c\u4e0d\u80fd\u542b\u6709ONNX Runtime\u65e0\u6cd5\u8fd0\u884c\u7684\u7b97\u5b50\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-YAML",children:"# ----------------------------------------------------------\r\n# \u6a21\u578b\u7cbe\u5ea6\u9a8c\u8bc1\u65b9\u5f0f\r\n# ----------------------------------------------------------\r\n\r\n# ppq\u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u6807\u5fd7\uff0c\u5f00\u542f\u65f6\u4e0d\u8fdb\u884c\u6fc0\u6d3b\u51fd\u6570\u2014\u2014\u2014\u2014gelu\u878d\u5408\r\ntest_flag: true\r\n# \u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\r\n# def quantonnxrun(config:dict):\r\n#    ...\r\n# \u9a8c\u8bc1\u6a21\u578b\u7cbe\u5ea6\u811a\u672c\u6587\u4ef6\u540d\r\ntest_run: test_run\r\n# \u9a8c\u8bc1\u6570\u636e\u7ec4\u6570\r\ntest_num: 5\r\natol: 0.04\r\nrtol: 0.01\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u914d\u7f6e\u7684YMAL\u6587\u4ef6\u3001\u6570\u636e\u9884\u5904\u7406\u811a\u672c\u548c\u9a8c\u8bc1\u7cbe\u5ea6\u811a\u672c\u9700\u653e\u5728\u540c\u4e00\u76ee\u5f55\u4e0b\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u91cf\u5316\u547d\u4ee4\uff0c\u751f\u6210\u91cf\u5316\u540e\u6a21\u578b\u548c\u6a21\u578b\u53c2\u6570\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Bash",children:"$ cd bert128\r\n$ ls\r\nbert128_dataset  bert_128_tf.onnx  default_config.yaml  pre_process.py  test_run.py\r\n$ auto_quant --config default_config.yaml\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5c06\u91cf\u5316\u540e\u7684\u6a21\u578b\u548c\u5206\u79bb\u7684\u6a21\u578b\u53c2\u6570\u4e00\u8d77\u653e\u5230NPU\u4e0a\u4f7f\u7528MLTC\u7f16\u8bd1\u8fd0\u884c\u3002\u5177\u4f53\u7f16\u8bd1\u8fd0\u884c\u65b9\u5f0f\u53ef\u53c2\u8003\u7f16\u8bd1\u6a21\u578b\u548c\u90e8\u7f72\u6a21\u578b\u7ae0\u8282\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4ee3\u7801\u793a\u4f8b",children:"\u4ee3\u7801\u793a\u4f8b"}),"\n",(0,i.jsx)(e.p,{children:"Bert128\u6a21\u578b\u9884\u5904\u7406\u811a\u672c\uff08pre_process.py\uff09\uff0c\u8bf7\u81ea\u884c\u51c6\u5907\u597dBert128\u7684\u6570\u636e\u96c6\u548cBert128\u7684ONNX\u6a21\u578b\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Python",children:'import torch\r\nimport numpy as np\r\nimport os\r\nfrom minio import Minio\r\nfrom utilities.utils import pull_from_minio\r\n\r\n\r\ndef pre_process(config: dict, data_num: int = 64) -> list:\r\n    """model preprocessed data\r\n\r\n    Args:\r\n        filelist (list, optional): input file list. Defaults to [].\r\n        data_num (int, optional): output data number.  Return the number of date.\r\n\r\n    Returns:\r\n        dict: model input data\r\n    """\r\n\r\n    result = []\r\n    # code ...\r\n    current_dir = config["local_model_path"]\r\n    BATCH_SIZE = data_num\r\n    INPUT_NAME = config["input_name"]\r\n\r\n    if config["dataset"]["file_type"] == "npy":\r\n        result = [\r\n            {\r\n                INPUT_NAME[x]: torch.from_numpy(\r\n                    np.load(config["dataset"]["file_path"] + config["dataset"]["file_name"][x] + str(idx) + ".npy")\r\n                ).to(torch.float32)\r\n                for x in range(len(INPUT_NAME))\r\n            }\r\n            for idx in range(BATCH_SIZE)\r\n        ]\r\n    elif config["dataset"]["file_type"] == "bin":\r\n        result = [\r\n            {\r\n                INPUT_NAME[x]: torch.load(\r\n                    np.load(config["dataset"]["file_path"] + config["dataset"]["file_name"][x] + str(idx) + ".bin")\r\n                ).to(torch.float32)\r\n                for x in range(len(INPUT_NAME))\r\n            }\r\n            for idx in range(BATCH_SIZE)\r\n        ]\r\n    else:\r\n        raise ("not support data  file type")\r\n    """result type\r\n\r\n    Returns:\r\n        result = [\r\n            {\r\n                "input_name1": data1,\r\n                "input_name2": data2\r\n            },\r\n            {\r\n                "input_name1": data3,\r\n                "input_name2": data4\r\n            },...\r\n        ]\r\n    data type-----\x3e tensor of torch\r\n    """\r\n    config["input_preprocess"] = True\r\n    return result\n'})}),"\n",(0,i.jsx)(e.p,{children:"Bert128\u6a21\u578b\u9a8c\u8bc1\u7cbe\u5ea6\u811a\u672c\uff08test_run.py\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-Python",children:'import onnxruntime\r\nimport torch\r\nimport os\r\nimport math\r\nimport numpy as np\r\nimport importlib\r\nimport torch.nn.functional as Fun\r\nimport matplotlib.pyplot as plt\r\n\r\n\r\ndef compare(result, ref, atol=0.005, rtol=2, accumulate=1):\r\n    """compare"""\r\n    if len(result) != len(ref):\r\n        raise RuntimeError(f"result length:{len(result)} is not equal to gold data length: {len(ref)}")\r\n    atol = max(atol, atol / 50 * accumulate)\r\n    rtol = int(rtol * np.sqrt(accumulate * 2))\r\n    # print(f"Comparing result using atol={atol}, rtol={rtol}")\r\n\r\n    result_int = np.copy(result)\r\n    result_int.dtype = "int16"\r\n    ref_int = np.copy(ref)\r\n    ref_int.dtype = "int16"\r\n\r\n    mismatch = 0\r\n    max_abs_diff = 0.0\r\n    max_rel_diff = 0\r\n    abs_diff_list = []\r\n    rel_diff_list = []\r\n\r\n    all_mismatch = []\r\n    for i, _ in enumerate(result):\r\n        abs_diff = abs(result[i] - ref[i])\r\n        rel_diff = abs(result_int[i] - ref_int[i])\r\n        abs_diff_list.append(abs_diff)\r\n        rel_diff_list.append(rel_diff)\r\n        if abs_diff > max_abs_diff:\r\n            max_abs_diff = abs_diff\r\n        if rel_diff > max_rel_diff:\r\n            max_rel_diff = rel_diff\r\n        if abs_diff > atol and rel_diff > rtol:\r\n            all_mismatch.append((i, abs_diff, rel_diff))\r\n            mismatch += 1\r\n\r\n    # if len(abs_diff_list) > 0:\r\n    #     print("mean absolute diff: {}".format(sum(abs_diff_list) / len(abs_diff_list)))\r\n    # else:\r\n    #     print("mean absolute diff: 0.0")\r\n    # if len(rel_diff_list) > 0:\r\n    #     print("mean relative diff: {}".format(sum(rel_diff_list) / len(rel_diff_list)))\r\n    # else:\r\n    #     print("mean relative diff: 0.0")\r\n    if mismatch != 0:\r\n        # print(\r\n        #     f"Failed: {mismatch}/{len(result)} mismatch,"\r\n        #     f"max absolute diff: {max_abs_diff}, max relative diff: {max_rel_diff}"\r\n        # )\r\n        n = min(10, mismatch)\r\n\r\n        def show_mismatch(n, idx, msg):\r\n            mismatches = sorted(all_mismatch, key=lambda x: x[idx], reverse=True)[:n]\r\n            for item in mismatches:\r\n                i = item[0]\r\n                # print(\r\n                #     f"{msg} mismatch: out[{i}] = {result[i]}({result_int[i]}),"\r\n                #     f"ref[{i}] = {ref[i]}({ref_int[i]}), atol={item[1]}, rtol={item[2]}",\r\n                #     flush=True,\r\n                # )\r\n\r\n        # print(f"\\n---------- top {n} max abs mismatches ----------")\r\n        show_mismatch(n, 1, "abs")\r\n        # print(f"\\n---------- top {n} max rel mismatches ----------")\r\n        show_mismatch(n, 2, "rel")\r\n        return False\r\n    # print(\r\n    #     f"Success: {mismatch}/{len(result)} mismatch,"\r\n    #     f"max absolute diff: {max_abs_diff}, max relative diff: {max_rel_diff}"\r\n    # )\r\n    # print("Succeed")\r\n    return True\r\n\r\n\r\ndef result_process(test_num, label_path, tf_position_path, tf_prob_path):\r\n    label = np.loadtxt(label_path)\r\n    tc = np.loadtxt("./model_zoo/quant_argmax.txt")\r\n    tc_prob = np.loadtxt("./model_zoo/quant_prob.txt")\r\n    tf = np.loadtxt(tf_position_path)\r\n    tf_prob = np.loadtxt(tf_prob_path)\r\n    equal_size = 0\r\n    for i in range(0, test_num):\r\n        if label[i] == tc[i]:\r\n            equal_size += 1\r\n    print("tc true_label_accuracy: ", equal_size, equal_size / test_num)\r\n    equal_size = 0\r\n    for i in range(0, test_num):\r\n        if label[i] == tf[i]:\r\n            equal_size += 1\r\n    print("tf true_label_accuracy: ", equal_size, equal_size / test_num)\r\n    # tf_label_accuracy\r\n    equal_size = 0\r\n    for i in range(0, test_num):\r\n        if tf[i] == tc[i]:\r\n            equal_size += 1\r\n    print("tf_label_accuracy: ", equal_size, equal_size / test_num)\r\n    # max_abs_diff\r\n    max_diff = 0\r\n    total_diff = 0\r\n    abs_diff_list = []\r\n    for i in range(0, test_num):\r\n        cur_diff = abs(tf_prob[i][int(tf[i])] - tc_prob[i][int(tf[i])])\r\n        abs_diff_list.append(cur_diff)\r\n        total_diff += cur_diff\r\n        if cur_diff > max_diff:\r\n            max_diff = cur_diff\r\n    print("max_abs_diff: ", max_diff)\r\n    # mean_abs_diff\r\n    mean_diff = total_diff / test_num\r\n    print("mean_abs_diff: ", mean_diff)\r\n\r\n    plt.hist(abs_diff_list, bins=100, density=False, histtype="bar")\r\n    plt.title("Histogram of absolute error, samples 10570")\r\n    plt.savefig("cmp.png")\r\n    # std_abs_diff\r\n    acc_diff = 0\r\n    for i in range(0, test_num):\r\n        cur_diff = abs(tf_prob[i][int(tf[i])] - tc_prob[i][int(tf[i])])\r\n        std_diff = (cur_diff - mean_diff) * (cur_diff - mean_diff)\r\n        acc_diff += std_diff\r\n    print("std_abs_diff: ", math.sqrt(acc_diff) / (test_num - 1))\r\n    # max_rel_diff\r\n    tf_prob_int = np.copy(tf_prob)\r\n    tf_prob_int.dtype = "int16"\r\n    tc_prob_int = np.copy(tc_prob)\r\n    tc_prob_int.dtype = "int16"\r\n\r\n    total_rel_diff = 0\r\n    max_rel_diff = 0\r\n    for i in range(0, test_num):\r\n        cur_rel_diff = abs(int(tf_prob_int[i][int(tf[i])]) - int(tc_prob_int[i][int(tf[i])]))\r\n        total_rel_diff += cur_rel_diff\r\n        if cur_rel_diff > max_rel_diff:\r\n            max_rel_diff = cur_rel_diff\r\n    print("max_rel_diff: ", max_rel_diff)\r\n\r\n    # mean_rel_diff\r\n    mean_rel_diff = total_rel_diff / test_num\r\n    print("mean_rel_diff: ", mean_rel_diff)\r\n    # std _rel_diff\r\n    acc_rel_diff = 0\r\n    for i in range(0, test_num):\r\n        cur_rel_diff = abs(int(tf_prob_int[i][int(tf[i])]) - int(tc_prob_int[i][int(tf[i])]))\r\n        std_rel_diff = (cur_rel_diff - mean_rel_diff) * (cur_rel_diff - mean_rel_diff)\r\n        acc_rel_diff += std_rel_diff\r\n    print("std_rel_diff: ", math.sqrt(acc_rel_diff) / (test_num - 1))\r\n\r\n\r\ndef quantonnxrun(config: dict):\r\n    module_name = config["pre_process"]\r\n    module = importlib.import_module(module_name)\r\n    pre_process = getattr(module, "pre_process")\r\n    test_num = config["test_num"]\r\n    input_name = config["input_name"]\r\n    if config["input_preprocess"]:\r\n        if config["dataset"]["file_type"] == "npy":\r\n            dataset = [\r\n                {\r\n                    input_name[x]: np.load(\r\n                        config["dataset"]["file_path"] + config["dataset"]["file_name"][x] + str(idx) + ".npy"\r\n                    ).astype(np.float32)\r\n                    for x in range(len(input_name))\r\n                }\r\n                for idx in range(test_num)\r\n            ]\r\n        elif config["dataset"]["file_type"] == "bin":\r\n            dataset = [\r\n                {\r\n                    input_name[x]: np.load(\r\n                        config["dataset"]["file_path"] + config["dataset"]["file_name"][x] + str(idx) + ".bin"\r\n                    ).astype(np.float32)\r\n                    for x in range(len(input_name))\r\n                }\r\n                for idx in range(test_num)\r\n            ]\r\n        else:\r\n            raise ("not support data  file type")\r\n    else:\r\n        dataset = pre_process(config, test_num)\r\n\r\n        for idx in range(test_num):\r\n            for x in range(len(input_name)):\r\n                if not torch.is_tensor(dataset[idx][input_name[x]]):\r\n                    raise TypeError("data type is not torch")\r\n                else:\r\n                    dataset[idx][input_name[x]] = dataset[idx][input_name[x]].numpy()\r\n    onnx_run = onnxruntime.InferenceSession(config["local_model_path"], providers=onnxruntime.get_available_providers())\r\n    onnx_outputs = [onnx_run.run([config["output_node"]], dataset[idx]) for idx in range(test_num)]\r\n\r\n    quant_run = onnxruntime.InferenceSession(config["target_file"], providers=onnxruntime.get_available_providers())\r\n    quant_outputs = [quant_run.run([config["output_node"]], dataset[idx]) for idx in range(test_num)]\r\n\r\n    # you can modify the following code to achieve accuracy comparison\r\n    pass_count = 0\r\n    pos_count = 0\r\n    for idx in range(test_num):\r\n        golden = onnx_outputs[idx][0]\r\n        quant = quant_outputs[idx][0]\r\n        position_quant = np.argmax(quant, axis=1)\r\n        position_golden = np.argmax(golden, axis=1)\r\n        for x in range(8):\r\n            ret = compare(quant[x], golden[x], atol=config["atol"], rtol=config["rtol"])\r\n            if ret:\r\n                pass_count += 1\r\n            if position_golden[x] == position_quant[x]:\r\n                pos_count += 1\r\n\r\n        print("quant::", idx, quant)\r\n        print("golden::", idx, golden)\r\n    print("pass_count:", pass_count, "\\t pass_rate:", "%.2f%%" % (pass_count / (8 * test_num) * 100))\r\n    print("position_count:", pos_count, "\\t pass_rate:", "%.2f%%" % (pos_count / (8 * test_num) * 100))\n'})})]})}function p(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},8822:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-28-a3244106bae7118a61872967bba91aef.png"},9067:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-07-6b2193bec294fd8c7b02fac65b9ed27a.png"},9101:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-01-8df7e8c22aca4cc5fda5b3a9aab64988.png"},9180:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-08-91c3543b11a65b4ac482d460c5bc8cc3.png"},9474:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-23-816fa08ca6c5816c3b480ecb3e32f262.png"},9742:(n,e,r)=>{r.d(e,{A:()=>s});const s=r.p+"assets/images/mltc-20-44f0cb9ff41c9e5d188232364144f3e0.png"}}]);