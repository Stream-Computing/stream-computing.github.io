"use strict";(self.webpackChunkstc_docuhub=self.webpackChunkstc_docuhub||[]).push([[6772],{1234:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>d,metadata:()=>p,toc:()=>a});const p=JSON.parse('{"id":"\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/p2p_perf\u4f7f\u7528\u6307\u5357","title":"p2p_perf\u4f7f\u7528\u6307\u5357","description":"p2p\\\\_perf\u6982\u8ff0","source":"@site/docs/AI\u52a0\u901f\u5361/\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/p2p_perf\u4f7f\u7528\u6307\u5357.md","sourceDirName":"\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c","slug":"/\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/p2p_perf\u4f7f\u7528\u6307\u5357","permalink":"/AI\u52a0\u901f\u5361/\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/p2p_perf\u4f7f\u7528\u6307\u5357","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/AI\u52a0\u901f\u5361/\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/p2p_perf\u4f7f\u7528\u6307\u5357.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"p2p_perf\u4f7f\u7528\u6307\u5357","sidebar_class_name":"green"},"sidebar":"AICardSidebar","previous":{"title":"NPU-Viewer\u4f7f\u7528\u6307\u5357","permalink":"/AI\u52a0\u901f\u5361/\u786c\u4ef6\u6027\u80fd\u6d4b\u8bd5\u624b\u518c/NPU-Viewer\u4f7f\u7528\u6307\u5357"},"next":{"title":"\u7b97\u529b\u670d\u52a1\u89e3\u51b3\u65b9\u6848","permalink":"/AI\u52a0\u901f\u5361/category/\u7b97\u529b\u670d\u52a1\u89e3\u51b3\u65b9\u6848"}}');var l=r(4848),s=r(8453);const d={sidebar_position:4,sidebar_label:"p2p_perf\u4f7f\u7528\u6307\u5357",sidebar_class_name:"green"},t="p2p_perf\u4f7f\u7528\u6307\u5357",c={},a=[{value:"p2p_perf\u6982\u8ff0",id:"p2p_perf\u6982\u8ff0",level:2},{value:"\u4f7f\u7528p2p_perf\u6d4b\u8bd5\u677f\u5361\u95f4\u6570\u636e\u4f20\u8f93",id:"\u4f7f\u7528p2p_perf\u6d4b\u8bd5\u677f\u5361\u95f4\u6570\u636e\u4f20\u8f93",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:3},{value:"\u64cd\u4f5c\u6b65\u9aa4",id:"\u64cd\u4f5c\u6b65\u9aa4",level:3}];function i(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"p2p_perf\u4f7f\u7528\u6307\u5357",children:"p2p_perf\u4f7f\u7528\u6307\u5357"})}),"\n",(0,l.jsx)(n.h2,{id:"p2p_perf\u6982\u8ff0",children:"p2p_perf\u6982\u8ff0"}),"\n",(0,l.jsx)(n.p,{children:"p2p_perf\u7528\u4e8e\u6d4b\u8bd5\u677f\u5361\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u8f93\u901f\u5ea6\uff0c\u4ee5\u8bc4\u4f30\u5361\u5361\u4e92\u8054\u7684\u6027\u80fd\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"\u4f7f\u7528p2p_perf\u6d4b\u8bd5\u677f\u5361\u95f4\u6570\u636e\u4f20\u8f93",children:"\u4f7f\u7528p2p_perf\u6d4b\u8bd5\u677f\u5361\u95f4\u6570\u636e\u4f20\u8f93"}),"\n",(0,l.jsx)(n.h3,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,l.jsx)(n.p,{children:"\u4fdd\u8bc1\u4e3b\u673a\u4e0a\u81f3\u5c11\u67092\u5f20\u677f\u5361\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u64cd\u4f5c\u6b65\u9aa4",children:"\u64cd\u4f5c\u6b65\u9aa4"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5c06p2p_perf\u5305\u4f20\u8f93\u5230\u4e3b\u673a\u4e0a\u5e76\u89e3\u538b\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ tar -xvzf p2p_perf-v1.3.0.tar.gz\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u542f\u52a8\u6d4b\u8bd5\uff0c\u7136\u540e\u7b49\u5f85\u6d4b\u8bd5\u5b8c\u6210\u5373\u53ef\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ cd p2p_perf_rdma/\n$ make\n$ ./memcpy_p2p\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u67e5\u770b\u6d4b\u8bd5\u7ed3\u679c\u3002\u6d4b\u8bd5\u5b8c\u6210\u540e\u76f4\u63a5\u5728\u7ec8\u7aef\u663e\u793a\u6d4b\u8bd5\u7ed3\u679c\uff0c\u5305\u62ec\u5728NPU0\u548cNPU1\u4e4b\u95f4\u505aDDR2DDR\u3001DDR2LLB\u3001LLB2DDR\u3001LLB2LLB\u6570\u636e\u4f20\u8f93\u65f6\u8017\u65f6\u548c\u901f\u5ea6\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"$ ./memcpy_p2p\n------ executing memcpy_p2p test from NPU0 to NPU1 ------\n\nDDR cp length (2176MB):\n  using allocated local_ddr: 0x01400000\n  using allocated remote_ddr: 0x01400000\nLLB cp length (32MB):\n  using fixed local_llb: 0xf8000000\n  using fixed remote_llb: 0xf8000000\n\n------ddr -> ddr------\n>> local 0x01400000 -> remote 0x801400000, len: 0x88000000, data = 0x01010101, flag = 0x11111111@0x889400000\n>> memcpy_p2p done, time = 2567703143ns, speed = 888.615783 MB/s\n------ddr -> ddr done------\n\n------ddr -> llb------\n>> local 0x01400000 -> remote 0x0f8000000, len: 0x1fffffc, data = 0x02020202, flag = 0x22222222@0x0f9fffffc\n>> memcpy_p2p done, time = 3726055ns, speed = 9005.349609 MB/s\n------ddr -> llb done------\n\n------llb -> ddr------\n>> local 0xf8000000 -> remote 0x801400000, len: 0x1fffffc, data = 0x03030303, flag = 0x33333333@0x8033ffffc\n>> memcpy_p2p done, time = 37849019ns, speed = 886.533569 MB/s\n------llb -> ddr done------\n\n------llb -> llb------\n>> local 0xf8000000 -> remote 0x0f8000000, len: 0x1fffffc, data = 0x04040404, flag = 0x44444444@0x0f9fffffc\n>> memcpy_p2p done, time = 3722323ns, speed = 9014.377929 MB/s\n------llb -> llb done------\n"})}),"\n"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(i,{...e})}):i(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>t});var p=r(6540);const l={},s=p.createContext(l);function d(e){const n=p.useContext(s);return p.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),p.createElement(s.Provider,{value:n},e.children)}}}]);